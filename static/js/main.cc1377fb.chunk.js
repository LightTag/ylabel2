(this.webpackJsonpylabel2=this.webpackJsonpylabel2||[]).push([[0],{382:function(e,t){},384:function(e,t){},395:function(e,t){},397:function(e,t){},424:function(e,t){},426:function(e,t){},427:function(e,t){},432:function(e,t){},434:function(e,t){},453:function(e,t){},465:function(e,t){},468:function(e,t){},471:function(e,t,a){"use strict";a.r(t);var n,r=a(0),i=a.n(r),l=a(10),o=a.n(l),c=a(52),s=(a(287),a(36)),u=(a(288),a(525)),d=a(46),m=a(40),p=a(55),f=a(68),b=a(240),h=a.n(b);n||(n={});var v=Object(p.b)({name:"classificationSlice",initialState:{classifications:{},labels:[],labelsToExample:{}},reducers:{addLabel:function(e,t){e.labels.includes(t.payload.name)||(e.labels.push(t.payload.name),e.labelsToExample[t.payload.name]=[])},deleteLabel:function(e,t){e.labels=e.labels.filter((function(e){return e!==t.payload.name})),e.labelsToExample[t.payload.name].forEach((function(t){delete e.classifications[t]})),delete e.labelsToExample[t.payload.name]},classify:function(e,t){var a=t.payload,n=a.exampleId,r=a.labelName,i=e.classifications[n];i===r||(void 0!==i&&(e.labelsToExample[i]=e.labelsToExample[i].filter((function(e){return e!==n}))),null!==r?(e.labelsToExample[r].push(n),e.classifications[n]=r):delete e.classifications[n])}}}),g=(v.actions,v.reducer),E=a(8),x=a.n(E),y=a(17),k=a(27),w=a(25),C=function(){function e(){Object(k.a)(this,e),this.items={}}return Object(w.a)(e,[{key:"get",value:function(e){return this.items[e]||0}},{key:"increment",value:function(e){var t=this.get(e);this.items[e]=t+1}}]),e}(),O=/[\b\s-.,!&:]+(?!$)/;function I(e){var t=new C,a=new Set;return e.content.split(O).forEach((function(e){e.match(/[\d]/)||(t.increment(e),a.add(e))})),{df:a,tf:t}}var j,L=function(){function e(){Object(k.a)(this,e),this.df=new C}return Object(w.a)(e,[{key:"fitTransform",value:function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,a={},n=new C;e.forEach((function(e){var t=I(e);t.df.forEach((function(e){n.increment(e)})),a[e.exampleId]=t.tf}));var r={};return e.forEach((function(e){r[e.exampleId]={},Object.keys(n.items).forEach((function(i){n.get(i)>t&&(r[e.exampleId][i]=Math.log1p(a[e.exampleId].get(i)/n.get(i)))}))})),{tfIdf:r,df:n}}(e),a=t.tfIdf,n=t.df;return this.df=n,a}},{key:"transform",value:function(e){var t=this,a={},n={};e.forEach((function(e){var t=I(e);n[e.exampleId]=t.tf})),e.forEach((function(e){a[e.exampleId]={},Object.keys(t.df.items).forEach((function(r){a[e.exampleId][r]=Math.log1p(n[e.exampleId].get(r)/t.df.get(r))}))}))}}]),e}(),R=a(39),S=a(38);!function(e){var t,a,n,r;!function(e){e.startIndexing="startIndexing",e.startQuery="startQuery",e.startInit="startInit",e.startSignificantTerms="startSignificantTerms",e.startDataInsert="startDataInsert"}(t||(t={})),e.IndexRequestMessageKind=t,function(e){e.endIndexing="endIndexing",e.endQuery="endQuery",e.endInit="endInit",e.endSignificantTerms="endSignificantTerms",e.endDataInsert="endDataInsert"}(a||(a={})),e.IndexResponseMessageKind=a,n||(n=e.Request||(e.Request={})),r||(r=e.Response||(e.Response={}))}(j||(j={}));var N,P=function(){return new Worker(a.p+"static/js/ndx_worker.bundle.worker.js")};!function(e){var t,a;!function(e){e.index="index",e.dataLoader="dataLoading",e.ai="ai"}(t||(t={})),e.EWorkerName=t,function(e){e.request="request",e.response="response",e.update="update"}(a||(a={})),e.ERquestOrResponesOrUpdate=a}(N||(N={}));var T,q=function(){},z=function(){function e(t){Object(k.a)(this,e),this.initialized=!1,this.requestId=0,this.responseListeners={},this.worker=t,this.jobCount=0}return Object(w.a)(e,[{key:"nextRequestId",value:function(){return this.requestId++,this.requestId}},{key:"startWork",value:function(e){q("Received requests",e),this.jobCount>0&&q("Currently blocked with ".concat(this.jobCount," jobs.  worker will queue"),e),this.jobCount+=1,this.worker.postMessage(e)}},{key:"registerResponseHandler",value:function(e){var t=this;return new Promise((function(a){var n=function(n){n.data.kind&&n.data.requestId===e?(t.jobCount-=1,q("Finished request ".concat(e,". ").concat(t.jobCount," remaining")),t.worker.removeEventListener("message",t.responseListeners[e]),delete t.responseListeners[e],a(n.data.payload)):q("Unhandled response",n.data)};t.responseListeners[e]=n,t.worker.addEventListener("message",n)}))}}]),e}(),F=function(e){Object(R.a)(a,e);var t=Object(S.a)(a);function a(){return Object(k.a)(this,a),t.call(this,new P)}return Object(w.a)(a,[{key:"initializeIndex",value:function(e){var t=this.nextRequestId(),a={workerName:N.EWorkerName.index,direction:N.ERquestOrResponesOrUpdate.request,requestId:t,kind:j.IndexRequestMessageKind.startInit,payload:{indexName:e}};this.startWork(a);var n=this;return this.registerResponseHandler(t).then((function(e){return n.initialized=!0,e}))}},{key:"buildIndex",value:function(){var e=this.nextRequestId(),t={workerName:N.EWorkerName.index,direction:N.ERquestOrResponesOrUpdate.request,requestId:e,kind:j.IndexRequestMessageKind.startIndexing,payload:{}};return this.startWork(t),this.registerResponseHandler(e)}},{key:"addDocs",value:function(e){if(!this.initialized)throw new Error("The index is not initialized yet");var t=this.nextRequestId(),a={direction:N.ERquestOrResponesOrUpdate.request,requestId:t,workerName:N.EWorkerName.index,kind:j.IndexRequestMessageKind.startDataInsert,payload:{examples:e}};return this.startWork(a),this.registerResponseHandler(t)}},{key:"insertAndIndex",value:function(){var e=Object(y.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.addDocs(t);case 2:return e.abrupt("return",this.buildIndex());case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSignificantTermsForLabel",value:function(e){if(!this.initialized)return q("Index wasn't initialized"),Promise.reject();var t=this.nextRequestId(),a={workerName:N.EWorkerName.index,direction:N.ERquestOrResponesOrUpdate.request,kind:j.IndexRequestMessageKind.startSignificantTerms,requestId:t,payload:{labelName:e}};return this.startWork(a),this.registerResponseHandler(t)}},{key:"query",value:function(e){if(!this.initialized)throw new Error("The index is not initialized yet");var t=this.nextRequestId(),a={workerName:N.EWorkerName.index,direction:N.ERquestOrResponesOrUpdate.request,kind:j.IndexRequestMessageKind.startQuery,requestId:t,payload:{query:e}};return this.worker.postMessage(a),this.registerResponseHandler(t)}}],[{key:"getInstance",value:function(){return void 0===a.instance&&(a.instance=new a),a.instance}}]),a}(z),M=function(){return new Worker(a.p+"static/js/ai_worker.bundle.worker.js")};!function(e){var t,a,n,r,i,l;!function(e){e.startVectorize="startVectorize",e.startFitPredict="startFitPredict",e.startValidation="startValidation"}(t||(t={})),e.AIRequestMessageKind=t,function(e){e.endVectorize="endVectorize",e.endFitPredict="endFitPredict",e.endValidation="endValidation"}(a||(a={})),e.AIResponseMessageKind=a,function(e){e.updateVectorize="updateVectorize",e.updateFitPredict="updateFitPredict",e.updateValidation="updateValidation"}(n||(n={})),e.AIUpdateMessageKind=n,r||(r=e.Request||(e.Request={})),i||(i=e.Response||(e.Response={})),l||(l=e.Update||(e.Update={}))}(T||(T={}));var W,A=T,D=function(e){Object(R.a)(a,e);var t=Object(S.a)(a);function a(){var e;return Object(k.a)(this,a),(e=t.call(this,new M)).workerName=N.EWorkerName.ai,e.training=!1,e}return Object(w.a)(a,[{key:"beginVectorization",value:function(e){var t={workerName:this.workerName,direction:N.ERquestOrResponesOrUpdate.request,kind:A.AIRequestMessageKind.startVectorize,payload:{method:e},requestId:this.nextRequestId()};return this.startWork(t),this.registerResponseHandler(t.requestId)}},{key:"beginUniversalVectorizer",value:function(){return this.beginVectorization("universalSentenceEncoder")}},{key:"beginTfidfVectorizer",value:function(){return this.beginVectorization("tfidf")}},{key:"beginValidation",value:function(){var e={workerName:this.workerName,direction:N.ERquestOrResponesOrUpdate.request,kind:A.AIRequestMessageKind.startValidation,payload:{},requestId:this.nextRequestId()};return this.startWork(e),this.registerResponseHandler(e.requestId)}},{key:"beginFitPredict",value:function(){var e={workerName:this.workerName,direction:N.ERquestOrResponesOrUpdate.request,kind:A.AIRequestMessageKind.startFitPredict,payload:{},requestId:this.nextRequestId()};return this.startWork(e),this.registerResponseHandler(e.requestId)}},{key:"afterNewLabel",value:function(){var e=Object(y.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.training){e.next=2;break}return e.abrupt("return");case 2:this.training=!0,this.training=!1;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"getInstance",value:function(){return void 0===this.instance&&(this.instance=new a),this.instance}}]),a}(z);function V(){return(V=Object(y.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=F.getInstance(),e.next=3,a.insertAndIndex(t);case 3:return e.next=5,D.getInstance().beginTfidfVectorizer();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}W||(W={});var B,H=Object(p.b)({name:"exampleSlice",initialState:{exampleIds:[],exampleIdsByDatasetName:{},exampleTermFrequency:{},docFrequency:{}},reducers:{addExamples:function(e,t){(new L).fitTransform(t.payload.examples),t.payload.examples.forEach((function(t){if(e.exampleIds.push(t.exampleId),t.datasetName){var a=e.exampleIdsByDatasetName[t.datasetName];a?a.push(t.exampleId):e.exampleIdsByDatasetName[t.datasetName]=[t.exampleId]}}))}}}).reducer,K=a(18);B||(B={});var U=Object(p.b)({name:"classificationSlice",initialState:{hasLabel:null,hasPrediction:null,label:null,searchQuery:null,predictedLabel:null,hasFilter:!1,everSearched:!1},reducers:{setSearchParams:function(e,t){Object.entries(t.payload.params).forEach((function(t){var a=Object(K.a)(t,2),n=a[0],r=a[1];e[n]=r})),t.payload.params.searchQuery&&(e.everSearched=!0),e.hasFilter=null!==e.hasLabel||null!==e.hasPrediction||null!==e.label||null!==e.predictedLabel}}});var Y=Object(p.b)({name:"appMode",initialState:{mode:"Regular"},reducers:{changeMode:function(e,t){e.mode=t.payload.mode}}});Object(d.d)();Object(d.b)();var Q=Object(m.c)({classificationReducer:g,exampleReducer:H,searchReducer:U.reducer,appMode:Y.reducer}),J={key:"root",storage:h.a},G=Object(f.g)(J,Q),_=Object(p.a)({reducer:G,middleware:Object(p.c)({serializableCheck:{ignoredActions:[f.a,f.f,f.b,f.c,f.d,f.e]}})});Object(f.h)(_);var Z=c.c,$=_,X=a(165),ee=a.n(X),te=a(506),ae=a(42),ne=a(517),re=a(518),ie=a(520),le=a(521),oe=a(476),ce=a(169),se=a(519),ue=a(531),de=a(264),me=a(250),pe=a.n(me),fe=a(249),be=a.n(fe),he=a(247),ve=a.n(he),ge=a(248),Ee=a.n(ge),xe=a(251),ye=a.n(xe),ke=a(245),we=a.n(ke),Ce=a(16),Oe=(a(292),function(e){Object(R.a)(a,e);var t=Object(S.a)(a);function a(){var e;return Object(k.a)(this,a),(e=t.call(this,"OurDatabase")).version(8).stores({example:"exampleId,datasetName,label,hasLabel,hasPrediction,[hasPrediction+hasLabel],predictedLabel,[predictedLabel+label],[predictedLabel+hasLabel],confidence,hasNegativeOrRejectedLabel",label:"name",indexCache:"name",vector:"exampleId,label,hasLabel,hasNegativeOrRejectedLabel",tfidf:"exampleId,label,hasLabel,hasNegativeOrRejectedLabel",kfold:"[timestamp+kNumber+label],[timestamp+label]"}),e.example=e.table("example"),e.label=e.table("label"),e.indexCache=e.table("indexCache"),e.vector=e.table("vector"),e.tfidf=e.table("tfidf"),e.kfold=e.table("kfold"),e.changeCallbacks={example:[],label:[],indexCache:[],vector:[],tfidf:[],kfold:[]},e}return Object(w.a)(a,[{key:"addTableEventListener",value:function(e,t){this.changeCallbacks[e].push(t)}},{key:"removeTableEventListener",value:function(e,t){this.changeCallbacks[e]=this.changeCallbacks[e].filter((function(e){return e!==t}))}}]),a}(Ce.a));function Ie(){return(Ie=Object(y.a)(x.a.mark((function e(t,a){var n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je.label.where("name").equals(t).first();case 2:if(!(n=e.sent)){e.next=8;break}return r=n.count+a,e.abrupt("return",je.label.update(t,{count:r}));case 8:return e.abrupt("return",Promise.reject("Couldn't find label \n    ".concat(t," in db")));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var je=function(){var e=new Oe;return e.on("changes",(function(t){var a={};t.forEach((function(t){!function(e,t){if("example"===e.table&&2===e.type){var a=(e=e).oldObj.label,n=e.obj.label;n===a||(void 0!==a&&(t[a]=t[a]-1||-1),void 0!==n&&(t[n]=t[n]+1||1))}}(t,a),e.changeCallbacks[t.table].forEach((function(e){return e(t)}))})),Promise.all(Object.entries(a).map((function(e){var t=Object(K.a)(e,2);return function(e,t){return Ie.apply(this,arguments)}(t[0],t[1])}))),Object.keys(a).length})),e}(),Le=(new Oe,a(241)),Re=a.n(Le),Se=F.getInstance();var Ne=function(){var e=Z((function(e){return e.searchReducer})),t=i.a.useCallback(Object(y.a)(x.a.mark((function t(){var a,n,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(q("Calling search",e),a={hasLabel:e.hasLabel||void 0,hasPrediction:e.hasPrediction||void 0,label:e.label||void 0,predictedLabel:e.predictedLabel||void 0},Object.keys(a).forEach((function(e){return void 0===a[e]&&delete a[e]})),n=function(){return(e.hasFilter?je.example.where(a):je.example.toCollection()).primaryKeys().then((function(t){return q("Got back ".concat(t.length," from filter")),q("Filter was",e),t}))},!(null!==e.searchQuery&&e.searchQuery.length>0)){t.next=9;break}return r=e.searchQuery,t.abrupt("return",n().then(function(){var e=Object(y.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.query(r);case 2:return a=e.sent,q('Search for "'.concat(r,'" and got ').concat(a.results.length," results")),e.abrupt("return",Re()(a.results.map((function(e){return e.exampleId})),t));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:return t.abrupt("return",n());case 10:case"end":return t.stop()}}),t)}))),[e]);return Object(s.d)(["search",e],t)},Pe=a(509),Te=a(30),qe=a.n(Te),ze=a(124),Fe=a.n(ze),Me=a(529),We=a(26),Ae=a(508),De=qe()((function(e){return{"@keyframes active":{"0%":{webkitTransform:"scale(.1)",opacity:"1",transform:"scale(.1)"},"70%":{webkitTransform:"scale(2.5)",opacity:"0",transform:"scale(2.5)"},"100%":{opacity:"0"}},beaconContainer:{position:"relative"},beacon:{position:"absolute",top:"50%",left:"50%",backgroundColor:e.palette.secondary.light,height:e.spacing(1),width:e.spacing(1),borderRadius:"50%",webkitTransform:"translateX(-50%) translateY(-50%)","&:before":{position:"absolute",content:'""',height:e.spacing(1),width:e.spacing(1),left:"0",top:"0",backgroundColor:"transparent",borderRadius:"50%",boxShadow:"0px 0px 2px 2px ".concat(e.palette.secondary.main),animationName:"$active",animationDuration:"2s",animationTimingFunction:"linear",animationIterationCount:"infinite"}}}})),Ve=function(e){var t=e.show,a=De();return t?i.a.createElement("span",{className:a.beaconContainer},i.a.createElement("span",{className:a.beacon})):null},Be=a(507),He=qe()((function(e){return{inputRoot:{color:"inherit"},inputInput:Object(ae.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),resultCount:{margin:e.spacing(0,1),fontWeight:"bold"},search:Object(ae.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(We.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(We.b)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}}})),Ke=function(){var e,t=He(),a=Z((function(e){return e.searchReducer})),n=a.searchQuery,r=a.everSearched,l=i.a.useState(n||void 0),o=Object(K.a)(l,2),s=o[0],u=o[1],d=Ne(),m=Object(c.b)(),p=i.a.useCallback(we()((function(e){m(U.actions.setSearchParams({params:{searchQuery:e.target.value}}))}),250),[]);return i.a.useEffect((function(){n&&u(n)}),[n]),i.a.createElement("div",{className:t.search},i.a.createElement("div",{className:t.searchIcon},i.a.createElement(Fe.a,null)),i.a.createElement(Me.a,{placeholder:"Search\u2026",value:s,onChange:function(e){u(e.target.value),p(e)},classes:{root:t.inputRoot,input:t.inputInput},inputProps:{"aria-label":"search"},endAdornment:i.a.createElement(Be.a,{position:"end"},i.a.createElement("span",{className:t.resultCount}," ",null===(e=d.data)||void 0===e?void 0:e.length))}),i.a.createElement(Ae.a,{in:d.isLoading},i.a.createElement(Pe.a,null)),i.a.createElement(Ve,{show:!r}))},Ue=a(510),Ye=a(511),Qe=a(528),Je=qe()({root:{},icon:{borderRadius:3,width:16,height:16},checkedIcon:{}}),Ge=function(e){var t=Object(c.b)(),a=Je(),n=Z((function(e){return e.searchReducer}));return i.a.createElement(Ue.a,{row:!0,style:{display:"inline"}},i.a.createElement(Ye.a,{labelPlacement:"bottom",control:i.a.createElement(Qe.a,{checked:1===n.hasLabel,onChange:function(e,a){return t(U.actions.setSearchParams({params:{hasLabel:a?1:null}}))},value:1===n.hasLabel}),label:i.a.createElement("span",{style:{fontSize:"0.75rem"}},"Show Labeled")}),i.a.createElement(Ye.a,{classes:a,labelPlacement:"bottom",control:i.a.createElement(Qe.a,{size:"small",style:{fontSize:"0.5rem"},checked:-1===n.hasLabel,onChange:function(e,a){return t(U.actions.setSearchParams({params:{hasLabel:a?-1:null}}))},value:-1===n.hasLabel}),label:i.a.createElement("span",{style:{fontSize:"0.75rem"}},"Hide Labeled")}),i.a.createElement(Ye.a,{labelPlacement:"bottom",control:i.a.createElement(Qe.a,{checked:1===n.hasPrediction,onChange:function(e,a){return t(U.actions.setSearchParams({params:{hasPrediction:a?1:null}}))},value:1===n.hasPrediction}),label:i.a.createElement("span",{style:{fontSize:"0.75rem"}},"Show Predicted")}),i.a.createElement(Ye.a,{labelPlacement:"bottom",control:i.a.createElement(Qe.a,{checked:-1===n.hasPrediction,onChange:function(e,a){return t(U.actions.setSearchParams({params:{hasPrediction:a?-1:null}}))},value:-1===n.hasPrediction}),label:i.a.createElement("span",{style:{fontSize:"0.75rem"}},"Hide Predicted")}))},_e=a(512);function Ze(e,t,a,n){var r=Object(s.d)(e,(function(){return a(je)}));return i.a.useEffect((function(){var e=function(e){e.table===t&&(void 0!==n&&n!==e.key||r.refetch())};return je.addTableEventListener(t,e),function(){je.removeTableEventListener(t,e)}}),[]),r}function $e(){return Ze("exampleCount","example",(function(e){return e.example.count()}),void 0)}var Xe=Ze,et=function(){var e=Z((function(e){return e.appMode.mode})),t=Ze("predictionCount","example",(function(e){return e.example.where({hasPrediction:1}).count()}),void 0),a=Object(c.b)();return t.data?i.a.createElement(Ye.a,{labelPlacement:"bottom",control:i.a.createElement(_e.a,{value:"ActiveLearning"===e,onChange:function(){var t="Regular"===e?"ActiveLearning":"Regular";a(Y.actions.changeMode({mode:t}))}}),label:"Active Learning"}):null},tt=a(522),at=a(104),nt=a(43),rt=a(246),it=a.n(rt),lt=a(129),ot=a(513);function ct(){return st.apply(this,arguments)}function st(){return(st=Object(y.a)(x.a.mark((function e(){var t,a,n,r,i,l;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je.example.orderBy(["hasPrediction","hasLabel"]).reverse().toArray();case 2:t=e.sent,a=t[0],n=Object.keys(a.metadata||{}),r=["exampleId","content","label","predictedLabel","confidence"].concat(Object(nt.a)(n)),i=t.map((function(e){return Object(at.a)(Object(at.a)({},e),e.metadata||{})})),l=lt.unparse({fields:r,data:i}),it()(l,"ylabalResults.csv","text/csv");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ut=function(){var e=Object(s.c)(ct),t=Object(K.a)(e,2),a=t[0],n=t[1];return $e().data?i.a.createElement(ot.a,{variant:"contained",color:"primary",onClick:function(){return a()},disabled:n.isLoading},"Download"):null},dt=a(530),mt=a(514),pt=a(515),ft=a(516),bt=qe()((function(e){return{header:{background:e.palette.error.main,color:e.palette.error.contrastText},button:{background:e.palette.error.main,color:e.palette.error.contrastText,"&:hover":{backgroundColor:e.palette.error.dark}}}}));function ht(){return vt.apply(this,arguments)}function vt(){return(vt=Object(y.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je.delete();case 2:localStorage.removeItem("persist:root"),window.location.reload();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var gt=function(){var e=i.a.useState(!1),t=Object(K.a)(e,2),a=t[0],n=t[1],r=bt();return $e().data?i.a.createElement(i.a.Fragment,null,i.a.createElement(ot.a,{onClick:function(){return n(!0)},className:r.button},"Start Over"),i.a.createElement(dt.a,{color:"danger",open:a,onClose:function(){return n(!1)}},i.a.createElement(mt.a,{className:r.header},i.a.createElement(ce.a,{variant:"h3"},"Delete All Data ?")),i.a.createElement(pt.a,null,i.a.createElement(ce.a,{variant:"h4",gutterBottom:!0},"Your about to delete all of the work you've done."),i.a.createElement(ce.a,{variant:"h4",gutterBottom:!0},"Are you sure you want to ?")),i.a.createElement(ft.a,null,i.a.createElement(ut,null),i.a.createElement(ot.a,{variant:"outlined",onClick:ht,className:r.button},"Yes I'm Sure")))):null},Et=qe()((function(){return{"@global":{".github-corner:hover .octo-arm":{animation:"octocat-wave 560ms ease-in-out"},"@keyframes octocat-wave":{"0%, 100%":{transform:"rotate(0)"},"20%, 60%":{transform:"rotate(-25deg)"},"40%, 80%":{transform:"rotate(10deg)"}},"@media (max-width: 500px)":{".github-corner:hover .octo-arm":{animation:"none"},".github-corner .octo-arm":{animation:"octocat-wave 560ms ease-in-out"}}}}})),xt=function(){return Et(),i.a.createElement("a",{href:"https://github.com/LightTag/ylabel2",className:"github-corner","aria-label":"View source on GitHub",target:"_blank"},i.a.createElement("svg",{width:"80",height:"80",viewBox:"0 0 250 250",style:{fill:"#151513",color:"#fff",position:"absolute",top:0,border:0,right:0},"aria-hidden":"true"},i.a.createElement("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}),i.a.createElement("path",{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor",style:{transformOrigin:"130px 106px"},className:"octo-arm"}),i.a.createElement("path",{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor",className:"octo-body"})))},yt=Object(ne.a)((function(e){return Object(re.a)({grow:{flexGrow:1},regularModeControls:Object(ae.a)({position:"relative",borderRadius:e.shape.borderRadius,marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),menuButton:{marginRight:e.spacing(2)},title:Object(ae.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),sectionDesktop:Object(ae.a)({display:"none"},e.breakpoints.up("md"),{display:"flex",marginRight:e.spacing(6)}),sectionMobile:Object(ae.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})})}));function kt(){var e=yt(),t=i.a.useState(null),a=Object(K.a)(t,2),n=a[0],r=a[1],l=i.a.useState(null),o=Object(K.a)(l,2),c=o[0],s=o[1],u=Boolean(n),d=Boolean(c),m="ActiveLearning"===Z((function(e){return e.appMode.mode})),p=$e();if(!p.data)return null;var f=p.data>0,b=function(){s(null)},h=function(){r(null),b()},v=i.a.createElement(de.a,{anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:u,onClose:h},i.a.createElement(ue.a,{onClick:h},"Profile"),i.a.createElement(ue.a,{onClick:h},"My account")),g="primary-search-account-menu-mobile",E=i.a.createElement(de.a,{anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},id:g,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:d,onClose:b},i.a.createElement(ue.a,null,i.a.createElement(oe.a,{"aria-label":"show 4 new mails",color:"inherit"},i.a.createElement(se.a,{badgeContent:4,color:"secondary"},i.a.createElement(ve.a,null))),i.a.createElement("p",null,"Messages")),i.a.createElement(ue.a,null,i.a.createElement(oe.a,{"aria-label":"show 11 new notifications",color:"inherit"},i.a.createElement(se.a,{badgeContent:11,color:"secondary"},i.a.createElement(Ee.a,null))),i.a.createElement("p",null,"Notifications")),i.a.createElement(ue.a,{onClick:function(e){r(e.currentTarget)}},i.a.createElement(oe.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit"},i.a.createElement(be.a,null)),i.a.createElement("p",null,"Profile")));return i.a.createElement("div",{className:e.grow},i.a.createElement(ie.a,{position:"static"},i.a.createElement(le.a,null,i.a.createElement(oe.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"open drawer"},i.a.createElement(pe.a,null)),i.a.createElement(ce.a,{className:e.title,variant:"h6",noWrap:!0},"YLabel"),i.a.createElement(et,null),i.a.createElement(Ae.a,{in:!m&&f},i.a.createElement("span",{className:e.regularModeControls},i.a.createElement(Ke,null))),i.a.createElement(tt.a,{in:!m&&f},i.a.createElement("span",{className:e.regularModeControls},i.a.createElement(Ge,null))),i.a.createElement("div",{className:e.grow}),i.a.createElement("div",{className:e.sectionDesktop},i.a.createElement(gt,null),i.a.createElement(ut,null)),i.a.createElement("div",{className:e.sectionMobile},i.a.createElement(oe.a,{"aria-label":"show more","aria-controls":g,"aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},color:"inherit"},i.a.createElement(ye.a,null)))),i.a.createElement(xt,null)),E,v)}var wt=a(79),Ct=a(51),Ot=function(e){var t=Object(Ct.a)();return i.a.createElement(wt.a,{orientation:"vertical",style:{height:"calc(100vh - ".concat("64px",")"),padding:t.spacing(2)}},i.a.createElement(wt.b,{propagateDimensions:!0,flex:.25},i.a.createElement("div",{style:{height:"100%",maxHeight:"100%",overflowY:"hidden"}},e.Left)),i.a.createElement(wt.c,null),i.a.createElement(wt.b,{propagateDimensions:!0,flex:.5},i.a.createElement("div",{style:{height:"100%",width:"100%",maxWidth:"100%",maxHeight:"100%",overflowY:"auto"}},e.Middle)),i.a.createElement(wt.c,null),i.a.createElement(wt.b,{propagateDimensions:!0,flex:.25},i.a.createElement("div",{style:{height:"100%",maxHeight:"100%",overflowY:"hidden"}},i.a.createElement("div",{style:{padding:"2rem"}},e.Right))))},It=a(526),jt=a(254),Lt=a.n(jt),Rt=function(){function e(){Object(k.a)(this,e),this.colormap={},this.size=0,this.labels=new Set}return Object(w.a)(e,[{key:"addLabel",value:function(e){this.labels.has(e)||(this.labels.add(e),this.recolor())}},{key:"getLabelColor",value:function(e){return this.addLabel(e),this.colormap[e]}},{key:"recolor",value:function(){var e=this,t=0,a=359/this.labels.size;this.colormap={},this.labels.forEach((function(n){e.colormap[n]=function(e,t,a){var n=Nt(e,t,a);return St(n)}(t,.32,.6),t+=a}))}}]),e}();var St=function(e){var t="#";return e.forEach((function(e){e<16&&(t+=0),t+=e.toString(16)})),t},Nt=function(e,t,a){var n=a<.5?a*(1+t):a+t-a*t,r=2*a-n;return[(e/=360)+1/3,e,e-1/3].map((function(e){return e<0&&e++,e>1&&e--,e=e<1/6?r+6*(n-r)*e:e<.5?n:e<2/3?r+6*(n-r)*(2/3-e):r,Math.round(255*e)}))},Pt=new Rt,Tt=qe()((function(e){return{root:{marginLeft:"0.1rem",padding:"0.2rem",boxShadow:"1px 1px 1px #CDCDCD",borderRadius:"2px",cursor:"pointer"},term:{},score:{}}})),qt=function(e){var t=e.term,a=Tt();return i.a.createElement("div",{className:a.root,onClick:function(){return e.searchForTerm(t)}},i.a.createElement("div",{className:a.term},t))},zt=function(e){return i.a.createElement(i.a.Fragment,null,e.terms.slice(0,22).map((function(t){return i.a.createElement(qt,{term:t.word,score:t.score,label:e.label,searchForTerm:e.searchForTerm})})))},Ft=function(e){var t=Object(s.d)(["sigTerms",e.label,e.count],(function(){return e.labelController.getSignificantTerms(e.label)}),{cacheTime:0});return void 0===t.isLoading?i.a.createElement("div",null,'"calculating"'):t.isError?i.a.createElement("div",null," error"):t.data?(q({label:e.label,terms:t.data.terms.slice(10)}),i.a.createElement(zt,{label:e.label,searchForTerm:e.labelController.searchForTerm,terms:t.data.terms})):i.a.createElement("div",null," problem ",JSON.stringify(t.isSuccess))},Mt=i.a.memo((function(e){var t=e.labelName;return i.a.createElement("span",null,i.a.createElement(Ye.a,{control:i.a.createElement(Qe.a,{checked:e.labelController.filteredLabel===t,onChange:function(){e.labelController.filteredLabel===e.labelName?e.labelController.changeLabelFilter(null,"human"):e.labelController.changeLabelFilter(t,"human")},inputProps:{"aria-label":"primary checkbox"}}),label:"Labels"}),i.a.createElement(Ye.a,{control:i.a.createElement(Qe.a,{checked:e.labelController.filteredPrediction===t,onChange:function(){e.labelController.filteredPrediction===e.labelName?e.labelController.changeLabelFilter(null,"pred"):e.labelController.changeLabelFilter(t,"pred")},inputProps:{"aria-label":"primary checkbox"},color:"primary"}),label:"Predictions"}))})),Wt=qe()((function(e){return{root:{marginBottom:"2px",textOverflow:"ellipsis",cursor:"pointer",padding:e.spacing(1),marginRight:e.spacing(1),borderRadius:"4px",fontWeight:"bold",userSelect:"none",fontSize:"0.75rem",display:"inline-block",width:"100%",maxHeight:"200px",position:"relative",marginTop:"1rem","&>label":{padding:"0.15rem",background:"white",position:"absolute",top:"-1rem"}},nameContainer:{textTransform:"uppercase",fontWeight:"bold",fontSize:"0.75rem"},termsContainer:{marginTop:"1rem",border:"1px solid black",fontSize:"10px",position:"relative",display:"inline-flex",width:"100%","flex-wrap":"wrap","&>label":{padding:"0.15rem",background:"white",position:"absolute",top:"-1rem",fontSize:"0.7rem",border:"1px solid black",borderBottom:"none",borderRadius:"4px"}},controlorContainers:{width:"66%"},toggleButton:{border:"0.1rem solid white",padding:"0.25rem",textTransform:"uppercase",fontSize:"0.5rem"}}})),At=i.a.memo((function(e){var t,a=Wt(),n=e.labelName,r=Pt.getLabelColor(n);t=i.a.useMemo((function(){var e=Pt.getLabelColor(n);return{borderColor:e,border:"1px solid ".concat(e)}}),[n]);return i.a.createElement("div",{style:t,className:a.root,onClick:function(){e.onClick&&(e.selected?e.onClick(null):e.onClick(n))}},i.a.createElement("label",{className:a.nameContainer,style:{color:r}}," ",n," - ",e.count," "),i.a.createElement("span",{className:a.toggleButton,onClick:function(){return e.labelController.applyLabelToSearchResults(n)}}," ","Label All"," "),i.a.createElement(Mt,{labelName:n,labelController:e.labelController}),i.a.createElement("span",{className:a.termsContainer},i.a.createElement("label",null,"Keywords"),i.a.createElement(Ft,{label:n,labelController:e.labelController,count:e.count})))}));function Dt(){var e=Object(c.b)(),t=Z((function(e){return e.searchReducer})),a=t.label,n=t.predictedLabel,r=function(){var e=Ne();return Object(s.c)((function(t){return je.transaction("rw",[je.example,je.tfidf,je.vector],Object(y.a)(x.a.mark((function a(){var n;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n={label:t||void 0,hasLabel:null!==t?1:-1},a.next=3,Promise.all((e.data||[]).map(function(){var e=Object(y.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Promise.all([je.example.update(t,n),je.tfidf.update(t,n),je.vector.update(t,n)]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return a.stop()}}),a)}))))}))}(),l=Object(K.a)(r,1)[0];return i.a.useMemo((function(){return{getSignificantTerms:function(e){return F.getInstance().getSignificantTermsForLabel(e)},applyLabelToSearchResults:l,searchForTerm:function(t){e(U.actions.setSearchParams({params:{searchQuery:t}}))},changeLabelFilter:function(t,a){var n={};"human"===a&&(n.label=t),"pred"===a&&(n.predictedLabel=t),e(U.actions.setSearchParams({params:n}))},filteredLabel:a,filteredPrediction:n}}),[l,e,a,n])}var Vt=function(){var e=Ze("labelCount","label",(function(e){return e.label.count()}),void 0),t=i.a.useState(),a=Object(K.a)(t,2),n=a[0],r=a[1],l=Object(s.c)(function(){var e=Object(y.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je.label.add({name:t,kind:"label",count:0},t);case 2:r(void 0);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),o=Object(K.a)(l,1)[0];return i.a.createElement("div",{style:{padding:"1rem"}},i.a.createElement(It.a,{fullWidth:!0,label:"Add a new label",value:n,onChange:function(e){return r(e.target.value)},InputProps:{startAdornment:i.a.createElement(Be.a,{position:"start"},i.a.createElement(Ve,{show:0===e.data})),endAdornment:i.a.createElement(Be.a,{position:"end"},i.a.createElement(oe.a,{size:"small",disabled:void 0===n,color:n?"primary":void 0,onClick:function(){return n&&o(n)}},i.a.createElement(Lt.a,{fontSize:"small"})))}}))};var Bt=function(e){var t=Xe("labelStats","label",(function(e){return e.label.toArray()}),void 0),a=Dt();return t.data?i.a.createElement(i.a.Fragment,null,i.a.createElement(ce.a,{gutterBottom:!0,variant:"h4"},"Labels"),i.a.createElement(Vt,null),i.a.createElement("div",{style:{flexWrap:"wrap",display:"flex",width:"100%",maxHeight:"95%",overflowY:"auto",marginTop:"1rem"}},t.data.map((function(e,t){return i.a.createElement(At,{labelController:a,selected:!1,count:e.count,labelName:e.name,key:e.name})})))):i.a.createElement("div",null,"loading")},Ht=a(255);var Kt=function(){return Xe(["examples","forAL"],"example",function(){var e=Object(y.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.example.where({hasLabel:-1,hasPrediction:1});case 2:return a=e.sent,e.next=5,a.toArray();case 5:return n=e.sent,n=Object(Ht.sortBy)(n,(function(e){return e.confidence?-1*e.confidence:0})),e.abrupt("return",{size:a.count(),items:n});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),void 0)},Ut=i.a.createContext(null),Yt=function(e){var t,a=Kt(),n=i.a.useState(void 0),r=Object(K.a)(n,2),l=r[0],o=r[1],c=i.a.useState(0),s=Object(K.a)(c,2),u=s[0],d=s[1],m=null===(t=a.data)||void 0===t?void 0:t.items;i.a.useEffect((function(){d(0),0===u&&void 0===l&&void 0!==m&&o(m[u])}),[m]);var p=function(){var e=u+1;d(e),o(m?m[e]:void 0)},f=i.a.useMemo((function(){return{goToNext:p,currentExample:l}}),[l]);return i.a.createElement(Ut.Provider,{value:f},e.children)},Qt=a(477);function Jt(e,t){return Gt.apply(this,arguments)}function Gt(){return(Gt=Object(y.a)(x.a.mark((function e(t,a){var n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je.example.get(t);case 2:return n=e.sent,(r=new Set((null===n||void 0===n?void 0:n.rejectedLabels)||[])).add(a),e.next=7,je.transaction("rw",[je.example,je.tfidf,je.vector],Object(y.a)(x.a.mark((function e(){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={hasNegativeOrRejectedLabel:1,rejectedLabels:Array.from(r)},e.next=3,je.example.update(t,a);case 3:return e.next=5,je.tfidf.update(t,a);case 5:return e.next=7,je.vector.update(t,a);case 7:case"end":return e.stop()}}),e)}))));case 7:return q("rejected label ".concat(a," for example ").concat(t)),D.getInstance().afterNewLabel(),e.abrupt("return");case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _t(e,t){return je.transaction("rw",[je.example,je.tfidf,je.vector],Object(y.a)(x.a.mark((function a(){var n,r;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,je.example.get(e);case 2:if(!(n=a.sent)){a.next=7;break}return r={label:t||void 0,hasLabel:null!==t?1:-1,hasNegativeOrRejectedLabel:t||(n.rejectedLabels||[]).length>0?1:-1},a.next=7,Promise.all([je.example.update(e,r),je.tfidf.update(e,r),je.vector.update(e,r)]);case 7:case"end":return a.stop()}}),a)}))))}var Zt=qe()((function(e){return{cbRoot:{display:"inline",width:"fit-content",maxWidth:"20%",textOverflow:"ellipsis",cursor:"pointer",padding:e.spacing(1),marginRight:e.spacing(1),borderRadius:"4px",fontWeight:"bold",userSelect:"none"}}})),$t=i.a.memo((function(e){var t=Zt(),a=e.labelName,n=i.a.useMemo((function(){var t=Pt.getLabelColor(a);return e.selected?{background:t,color:"white"}:{borderColor:t,color:t,border:"1px solid"}}),[a,e.selected]),r=i.a.useContext(Ut),l=function(){e.onClick&&(e.selected?e.onClick(null):(e.onClick(a),D.getInstance().afterNewLabel(),r&&r.goToNext()))};return i.a.createElement("div",{onKeyDown:function(e){"Enter"!==e.key&&32!==e.keyCode||(l(),e.preventDefault())},style:n,className:t.cbRoot,onClick:l},a," ",e.comment?" - ".concat(e.comment):null)})),Xt=i.a.memo((function(e){var t=e.exampleId,a=Xe("labels","label",(function(e){return e.label.toArray()}),void 0),n=Xe(["exampleLabel",t],"example",(function(e){return e.example.get(t)}),e.exampleId);return a.data&&n.data?i.a.createElement("div",null,a.data.map((function(e){var t;return i.a.createElement("span",{style:n.data.rejectedLabels.includes(e.name)?{opacity:.3}:{}},i.a.createElement($t,{labelName:e.name,selected:(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.label)===e.name,onClick:function(){return _t(n.data.exampleId,e.name)}}))}))):null})),ea=a(523),ta=Object(ne.a)((function(e){return{root:{boxShadow:"4px 4px 4px #CDCDCD ",margin:e.spacing(3),padding:e.spacing(3),lineHeight:"2.5rem"},body:{whiteSpace:"pre-wrap",fontSize:"16px",lineHeight:"32px","&>em":{background:"yellow","&:focus":{fontWeight:"bold"}}},divider:{margin:e.spacing(2,0)},ribbon:{height:"15%"}}})),aa=i.a.memo((function(e){var t=Z((function(e){return e.searchReducer})).searchQuery,a=e.text,n=[];if(t){t=t.toLowerCase();for(var r=a.toLowerCase().search(t);-1!==r;){n.push(i.a.createElement("span",null,a.slice(0,r)));var l=r+t.length;n.push(i.a.createElement("em",{tabIndex:0},a.slice(r,l))),r=(a=a.slice(l)).search(t)}n.push(i.a.createElement("span",null,a))}else n.push(i.a.createElement("span",null,e.text));return i.a.createElement(i.a.Fragment,null," ",n," ")})),na=function(e){var t,a,n,r,l=ta(),o=Xe(["example",e.exampleId],"example",(function(t){return t.example.get(e.exampleId)}),e.exampleId),c=i.a.useContext(Ut);return i.a.useEffect((function(){e.onLoad&&e.onLoad()}),[o.data]),o.data?i.a.createElement(Qt.a,{className:l.root,style:{border:(null===(t=o.data)||void 0===t?void 0:t.predictedLabel)?"1px solid ".concat(Pt.getLabelColor(o.data.predictedLabel)):void 0}},i.a.createElement("div",{className:l.ribbon},i.a.createElement(ce.a,{variant:"subtitle1",color:"primary"},e.score||null),i.a.createElement(Xt,{exampleId:e.exampleId})),i.a.createElement(ea.a,{className:l.divider}),i.a.createElement("div",{style:{fontWeight:"bold"},onClick:function(){o.data&&o.data.predictedLabel&&(Jt(o.data.exampleId,o.data.predictedLabel),c&&c.goToNext())}}," ",(null===(a=o.data)||void 0===a?void 0:a.predictedLabel)||null," ",(null===(n=o.data)||void 0===n||null===(r=n.confidence)||void 0===r?void 0:r.toLocaleString("en",{style:"percent"}))||null),i.a.createElement(ce.a,{className:l.body,dir:"auto"},i.a.createElement(aa,{text:o.data.content}))):i.a.createElement("div",null,"HI")},ra=function(){var e=i.a.useRef(null),t=i.a.useContext(Ut);if(i.a.useEffect((function(){e.current&&e.current.focus()})),!t)return i.a.createElement("div",null,"Not in an active learning context");if(void 0===t.currentExample)return i.a.createElement("div",null,"No example in context");return i.a.createElement("div",{ref:e,onKeyDown:function(e){t.currentExample&&t.currentExample.predictedLabel&&("x"===e.key&&(Jt(t.currentExample.exampleId,t.currentExample.predictedLabel),t.goToNext()),"a"===e.key&&(_t(t.currentExample.exampleId,t.currentExample.predictedLabel),t.goToNext()))},tabIndex:0},i.a.createElement(na,{score:1,exampleId:t.currentExample.exampleId}),";",i.a.createElement(ot.a,{onClick:t.goToNext},"Skip"))},ia=D.getInstance(),la=function(){var e=i.a.useState(!1),t=Object(K.a)(e,2),a=t[0],n=t[1],r=function(){var e=Object(y.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.next=3,ia.beginTfidfVectorizer();case 3:n(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(y.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.next=3,ia.beginUniversalVectorizer();case 3:n(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(y.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.next=3,ia.beginFitPredict();case 3:return e.next=5,n(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=Object(y.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.next=3,ia.beginValidation();case 3:n(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,i.a.createElement(ot.a,{disabled:a,onClick:r},"Calculate TFIDF"),i.a.createElement(ot.a,{disabled:a,onClick:l},"Vectorize"),i.a.createElement(ot.a,{disabled:a,onClick:o},"Train SVM"),i.a.createElement(ot.a,{disabled:a,onClick:c,color:"primary"},"Val"),i.a.createElement(Ae.a,{in:a},i.a.createElement(Pe.a,{variant:"indeterminate"})))},oa=a(106),ca=new oa.c({fixedWidth:!0}),sa=function(e){return i.a.createElement(oa.b,{cache:ca,columnIndex:0,key:e.virtualizedRowProps.key,parent:e.virtualizedRowProps.parent,rowIndex:e.virtualizedRowProps.index},(function(t){var a=t.measure;return i.a.createElement("div",{style:e.virtualizedRowProps.style},i.a.createElement(na,{key:e.exampleId,exampleId:e.exampleId,onLoad:a}))}))},ua=function(e){var t=e.exampleIds;return i.a.createElement(oa.a,null,(function(a){var n=a.height,r=a.width;return i.a.createElement(oa.d,{rowHeight:ca.rowHeight,rowCount:t.length,width:r,height:n,rowRenderer:function(t){return i.a.createElement(sa,{virtualizedRowProps:t,exampleId:e.exampleIds[t.index]})},deferredMeasurementCache:ca})}))},da=function(e){return new Promise((function(t,a){var n={worker:!1,headerPlacement:!0,dynamicTyping:!0,complete:function(e){return t(e)},error:function(e){return a(e.message)},skipEmptyLines:!0,header:!0};lt.parse(e,n)}))},ma=function(e){return new Promise((function(t,a){var n=new FileReader;n.onload=function(){try{var e=n.result,r=JSON.parse(e);Array.isArray(r)?t(r):a("The JSON you uploaded is a single object. Please convert it to an array of objects, one per example")}catch(i){a("This JSON has errors. Please validate the JSON and try again")}},n.readAsText(e)}))},pa=function(){var e=Object(y.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.name.endsWith("json")){e.next=6;break}return e.next=3,ma(t);case 3:a=e.sent,e.next=10;break;case 6:return e.next=8,da(t);case 8:n=e.sent,a=n.data;case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fa=a(258),ba=a.n(fa),ha=a(524),va=function(e){var t=e.data,a=e.key,n=e.labelKey,r=[];return t&&a&&t.forEach((function(e){var t=Object(at.a)({},e);delete t[a],r.push({content:e[a],datasetName:"test",exampleId:ba()(e[a]).toString(),label:n?e[n]:void 0,hasLabel:n&&e[n]?1:-1,hasPrediction:-1,kind:"example",hasNegativeOrRejectedLabel:-1,rejectedLabels:[],metadata:t})})),function(e){return V.apply(this,arguments)}(r)},ga=function(e){var t=i.a.useRef(null),a=i.a.useState(),n=Object(K.a)(a,2),r=n[0],l=n[1],o=i.a.useState(),c=Object(K.a)(o,2),u=c[0],d=c[1],m=i.a.useState(),p=Object(K.a)(m,2),f=p[0],b=p[1],h=i.a.useState(),v=Object(K.a)(h,2),g=v[0],E=v[1],k=Object(s.c)(va),w=Object(K.a)(k,2),C=w[0],O=w[1],I=function(){var a=Object(y.a)(x.a.mark((function a(n){var r;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),!t){a.next=12;break}if(!t.current){a.next=12;break}if(!t.current.files){a.next=12;break}if(!t.current.files[0]){a.next=12;break}return a.next=8,pa(t.current.files[0]);case 8:r=a.sent,E(r),l(Object.keys(r[0])),e.afterSubmit&&e.afterSubmit();case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return i.a.createElement(ha.a,{container:!0,spacing:4},i.a.createElement(ha.a,{item:!0,xs:12},i.a.createElement("input",{ref:t,accept:"text/csv, text/tsv, .csv,.tsv, .json",onChange:I,style:{display:"none"},id:"csv-file",multiple:!0,type:"file"}),i.a.createElement("label",{htmlFor:"csv-file"},i.a.createElement(ot.a,{fullWidth:!0,variant:"outlined",component:"span",color:"primary"},"Add A CSV"))),i.a.createElement(ha.a,{item:!0,xs:12},i.a.createElement(It.a,{required:!0,fullWidth:!0,disabled:!r,onChange:function(e){return d(e.target.value)},select:!0,label:"Data Column",helperText:"Which column will you be labeling? ",value:u},(r||[]).map((function(e){return i.a.createElement(ue.a,{key:e,value:e},e)})))),i.a.createElement(ha.a,{item:!0,xs:12},i.a.createElement(It.a,{fullWidth:!0,disabled:!u,onChange:function(e){return b(e.target.value)},select:!0,label:"Label Column",helperText:"Is there a column with labels?  ",value:u},i.a.createElement(ue.a,{key:"empty",value:void 0,disabled:!1},i.a.createElement(ce.a,{color:"error"}," No Labels ")),(r||[]).map((function(e){return i.a.createElement(ue.a,{key:e,value:e,disabled:e===u},e)})))),i.a.createElement(ha.a,{item:!0,xs:12},i.a.createElement(ot.a,{color:"primary",variant:"contained",disabled:!u||O.isLoading,onClick:function(){return C({data:g,key:u,labelKey:f})},fullWidth:!0},i.a.createElement(Ae.a,{in:!O.isLoading},i.a.createElement("span",null," Upload "))),i.a.createElement(Ae.a,{in:O.isLoading},i.a.createElement(Pe.a,null))))},Ea=function(e){return i.a.createElement(dt.a,{open:e.open,onClose:e.onClose},i.a.createElement(mt.a,null,"Add Data"),i.a.createElement(pt.a,null,i.a.createElement(ga,null)))},xa=function(e){var t=i.a.useState(!1),a=Object(K.a)(t,2),n=a[0],r=a[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement(ot.a,Object.assign({},e.buttonProps,{onClick:function(){return r(!0)}}),e.label),i.a.createElement(Ea,{open:n,onClose:function(){return r(!1)}}))},ya=Ea,ka=function(){return i.a.createElement("div",{style:{width:"400px",margin:"auto"}},i.a.createElement(ce.a,{variant:"h3",gutterBottom:!0},"No Results"),i.a.createElement(ce.a,{variant:"h5",gutterBottom:!0},"We searched hard, but the current query doesn't have any matches"))},wa=function(){var e=Ne(),t=e.data||[];return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ae.a,{in:e.isLoading},i.a.createElement("div",null,"Loading")),i.a.createElement(Ae.a,{in:e.isSuccess&&t.length>0,mountOnEnter:!0,unmountOnExit:!0},i.a.createElement(ua,{exampleIds:t})),i.a.createElement(Ae.a,{in:e.isSuccess&&0===t.length,mountOnEnter:!0,unmountOnExit:!0},i.a.createElement(ka,null)))},Ca=function(){var e="ActiveLearning"===Z((function(e){return e.appMode.mode}));return i.a.createElement("div",{style:{height:"100%",padding:"2rem",maxHeight:"100%",overflowY:"auto"}},e?i.a.createElement(Yt,null,i.a.createElement(ra,null)):i.a.createElement(wa,null))},Oa=function(){return i.a.createElement(Ot,{Left:i.a.createElement(Bt,null),Middle:i.a.createElement(Ca,null),Right:i.a.createElement("div",null,i.a.createElement(la,null)," ",i.a.createElement(xa,{label:"Add Data",buttonProps:{variant:"contained",color:"primary"}}))})},Ia=a(167),ja=a.n(Ia),La=a(259),Ra=a.n(La),Sa=a(260),Na=a.n(Sa),Pa=a(261),Ta=a.n(Pa),qa=a(262),za=a.n(qa),Fa=a(263),Ma=a.n(Fa),Wa=function(e){return i.a.createElement(ha.a,{item:!0,xs:6,md:3},i.a.createElement(Qt.a,{style:{padding:"1rem",height:"100%"}},i.a.createElement(ha.a,{container:!0,alignItems:"center",spacing:2,justify:"space-between"},i.a.createElement(ha.a,{item:!0,xs:1},e.Icon?i.a.createElement(e.Icon,{fontSize:"large"}):null),i.a.createElement(ha.a,{item:!0,xs:10},i.a.createElement(ce.a,{variant:"h4"},e.title)),i.a.createElement(ha.a,{item:!0,xs:12},i.a.createElement("label",{style:{fontSize:"16px"}},e.subtitle," ")))))},Aa=function(){return i.a.createElement(ha.a,{container:!0,spacing:4,style:{padding:"2rem",margin:"-16px -32px"}},i.a.createElement(Wa,{title:"Categorize Documents",subtitle:"YLabel can help you categorize documents",Icon:Ra.a}),i.a.createElement(Wa,{title:"Customizable",subtitle:"YLabel works on your data and your categories. ",Icon:Na.a}),i.a.createElement(Wa,{title:"Search",subtitle:"Use the search bar to find similar documents at once",Icon:Fe.a}),i.a.createElement(Wa,{title:"Automation",subtitle:"YLabel learns from you and provides predictions",Icon:ja.a}),i.a.createElement(Wa,{title:"Active Learning",subtitle:"YLabel can tell you what to label so that it can learn faster and automate better",Icon:ja.a}),i.a.createElement(Wa,{title:"Download",subtitle:"When you're done, click download to get back your labels and model predictions in a CSV",Icon:Ta.a}),i.a.createElement(Wa,{title:"Secure",subtitle:"Your data never leaves your computer. YLabel runs the machine learning and search on your machine. ",Icon:za.a}),i.a.createElement(Wa,{title:"Open Source",subtitle:"YLabel is free and open source. Fork the repo, extend it and help the community make it even better",Icon:Ma.a}))},Da=qe()((function(e){return{root:{padding:e.spacing(2)},header:{width:"fit-content",padding:e.spacing(2),margin:"auto"},subheader:{fontSize:"16px",width:"20rem",margin:"auto",marginTop:e.spacing(2)},startButton:Object(ae.a)({width:"fit-content",padding:e.spacing(2),margin:"auto"},e.breakpoints.up("sm"),{marginBottom:e.spacing(4)})}})),Va=function(){var e=i.a.useState(!1),t=Object(K.a)(e,2),a=t[0],n=t[1],r=Da();return i.a.createElement("div",{className:r.root},i.a.createElement("div",{className:r.header},i.a.createElement(ce.a,{color:"primary",variant:"h2"},"Welcome To YLabel"),i.a.createElement(ce.a,{color:"primary",variant:"body1",className:r.subheader},"A free and open source tool for document categorization from the makers of LightTag")),i.a.createElement("div",{className:r.startButton},i.a.createElement(ot.a,{variant:"contained",color:"primary",onClick:function(){return n(!0)}},i.a.createElement(ce.a,{align:"center",variant:"h4"},"Start Categorizing"))),i.a.createElement(Aa,null),i.a.createElement(ya,{open:a,onClose:function(){return n(!1)}}))},Ba=function(){return Xe("exampleCount","example",(function(e){return e.example.count()}),void 0).data?i.a.createElement(Oa,null):i.a.createElement(Va,null)},Ha=ee()({typography:{fontSize:10,fontFamily:"Roboto"}}),Ka=new s.a,Ua=qe()((function(){return{"@global":{"*:focus":{outline:0}}}}));var Ya=function(){var e=Ua();return i.a.createElement(c.a,{store:$},i.a.createElement(s.b,{queryCache:Ka},i.a.createElement(te.a,{theme:Ha},i.a.createElement(u.a,{classes:e}),i.a.createElement(kt,null),i.a.createElement(Ba,null))))},Qa=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,532)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,l=t.getTTFB;a(e),n(e),r(e),i(e),l(e)}))};F.getInstance().initializeIndex().then((function(){})).catch((function(e){})),je.label.offset(12).delete(),o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(Ya,null)),document.getElementById("root")),Qa()}},[[471,1,2]]]);
//# sourceMappingURL=main.cc1377fb.chunk.js.map