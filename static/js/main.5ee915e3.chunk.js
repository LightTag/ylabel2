(this.webpackJsonpylabel2=this.webpackJsonpylabel2||[]).push([[0],{381:function(e,t){},383:function(e,t){},394:function(e,t){},396:function(e,t){},423:function(e,t){},425:function(e,t){},426:function(e,t){},431:function(e,t){},433:function(e,t){},452:function(e,t){},464:function(e,t){},467:function(e,t){},470:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),i=a(10),o=a.n(i),c=a(51),s=(a(286),a(36)),u=(a(287),a(525)),d=a(45),m=a(40),p=a(55),f=a(68),b=a(240),h=a.n(b);n||(n={});var v=Object(p.b)({name:"classificationSlice",initialState:{classifications:{},labels:[],labelsToExample:{}},reducers:{addLabel:function(e,t){e.labels.includes(t.payload.name)||(e.labels.push(t.payload.name),e.labelsToExample[t.payload.name]=[])},deleteLabel:function(e,t){e.labels=e.labels.filter((function(e){return e!==t.payload.name})),e.labelsToExample[t.payload.name].forEach((function(t){delete e.classifications[t]})),delete e.labelsToExample[t.payload.name]},classify:function(e,t){var a=t.payload,n=a.exampleId,r=a.labelName,l=e.classifications[n];l===r||(void 0!==l&&(e.labelsToExample[l]=e.labelsToExample[l].filter((function(e){return e!==n}))),null!==r?(e.labelsToExample[r].push(n),e.classifications[n]=r):delete e.classifications[n])}}}),g=(v.actions,v.reducer),E=a(8),x=a.n(E),y=a(17),k=a(27),w=a(25),C=function(){function e(){Object(k.a)(this,e),this.items={}}return Object(w.a)(e,[{key:"get",value:function(e){return this.items[e]||0}},{key:"increment",value:function(e){var t=this.get(e);this.items[e]=t+1}}]),e}(),O=/[\b\s-.,!&:]+(?!$)/;function L(e){var t=new C,a=new Set;return e.content.split(O).forEach((function(e){e.match(/[\d]/)||(t.increment(e),a.add(e))})),{df:a,tf:t}}var j,I=function(){function e(){Object(k.a)(this,e),this.df=new C}return Object(w.a)(e,[{key:"fitTransform",value:function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,a={},n=new C;e.forEach((function(e){var t=L(e);t.df.forEach((function(e){n.increment(e)})),a[e.exampleId]=t.tf}));var r={};return e.forEach((function(e){r[e.exampleId]={},Object.keys(n.items).forEach((function(l){n.get(l)>t&&(r[e.exampleId][l]=Math.log1p(a[e.exampleId].get(l)/n.get(l)))}))})),{tfIdf:r,df:n}}(e),a=t.tfIdf,n=t.df;return this.df=n,a}},{key:"transform",value:function(e){var t=this,a={},n={};e.forEach((function(e){var t=L(e);n[e.exampleId]=t.tf})),e.forEach((function(e){a[e.exampleId]={},Object.keys(t.df.items).forEach((function(r){a[e.exampleId][r]=Math.log1p(n[e.exampleId].get(r)/t.df.get(r))}))}))}}]),e}();!function(e){var t,a;!function(e){e.index="index",e.dataLoader="dataLoading",e.ai="ai"}(t||(t={})),e.EWorkerName=t,function(e){e.request="request",e.response="response",e.update="update"}(a||(a={})),e.ERquestOrResponesOrUpdate=a}(j||(j={}));var R,S=a(39),N=a(38);!function(e){var t,a,n,r;!function(e){e.startIndexing="startIndexing",e.startQuery="startQuery",e.startInit="startInit",e.startSignificantTerms="startSignificantTerms"}(t||(t={})),e.IndexRequestMessageKind=t,function(e){e.endIndexing="endIndexing",e.endQuery="endQuery",e.endInit="endInit",e.endSignificantTerms="endSignificantTerms"}(a||(a={})),e.IndexResponseMessageKind=a,n||(n=e.Request||(e.Request={})),r||(r=e.Response||(e.Response={}))}(R||(R={}));var P=function(){return new Worker(a.p+"static/js/ndx_worker.bundle.worker.js")},T=function(){function e(t){Object(k.a)(this,e),this.initialized=!1,this.requestId=0,this.responseListeners={},this.worker=t}return Object(w.a)(e,[{key:"nextRequestId",value:function(){return this.requestId++,this.requestId}},{key:"registerResponseHandler",value:function(e){var t=this;return new Promise((function(a){var n=function(n){n.data.kind&&n.data.requestId===e&&(t.worker.removeEventListener("message",t.responseListeners[e]),delete t.responseListeners[e],a(n.data.payload))};t.responseListeners[e]=n,t.worker.addEventListener("message",n)}))}}]),e}();var q,z=function(){};!function(e){e.tfidf="tfidf",e.insertToDb="insertToDb",e.trainSVM="trainSVM",e.vectorize="vectorize",e.validateModel="validateModel"}(q||(q={}));var M,F=function(e){Object(S.a)(a,e);var t=Object(N.a)(a);function a(){return Object(k.a)(this,a),t.call(this,new P)}return Object(w.a)(a,[{key:"initializeIndex",value:function(e){var t=this.nextRequestId(),a={workerName:j.EWorkerName.index,direction:j.ERquestOrResponesOrUpdate.request,requestId:t,kind:R.IndexRequestMessageKind.startInit,payload:{indexName:e}};this.worker.postMessage(a);var n=this;return this.registerResponseHandler(t).then((function(e){return n.initialized=!0,e}))}},{key:"addDocs",value:function(e){if(!this.initialized)throw new Error("The index is not initialized yet");var t=this.nextRequestId(),a={workerName:j.EWorkerName.index,direction:j.ERquestOrResponesOrUpdate.request,kind:R.IndexRequestMessageKind.startIndexing,requestId:t,payload:{examples:e}};return this.worker.postMessage(a),this.registerResponseHandler(t)}},{key:"getSignificantTermsForLabel",value:function(e){if(!this.initialized)return z("Index wasn't initialized"),Promise.reject();var t=this.nextRequestId(),a={workerName:j.EWorkerName.index,direction:j.ERquestOrResponesOrUpdate.request,kind:R.IndexRequestMessageKind.startSignificantTerms,requestId:t,payload:{labelName:e}};return this.worker.postMessage(a),this.registerResponseHandler(t)}},{key:"query",value:function(e){if(!this.initialized)throw new Error("The index is not initialized yet");var t=this.nextRequestId(),a={workerName:j.EWorkerName.index,direction:j.ERquestOrResponesOrUpdate.request,kind:R.IndexRequestMessageKind.startQuery,requestId:t,payload:{query:e}};return this.worker.postMessage(a),this.registerResponseHandler(t)}}],[{key:"getInstance",value:function(){return void 0===a.instance&&(a.instance=new a),a.instance}}]),a}(T),D=function(){return new Worker(a.p+"static/js/ai_worker.bundle.worker.js")};!function(e){var t,a,n,r,l,i;!function(e){e.startVectorize="startVectorize",e.startFitPredict="startFitPredict",e.startValidation="startValidation"}(t||(t={})),e.AIRequestMessageKind=t,function(e){e.endVectorize="endVectorize",e.endFitPredict="endFitPredict",e.endValidation="endValidation"}(a||(a={})),e.AIResponseMessageKind=a,function(e){e.updateVectorize="updateVectorize",e.updateFitPredict="updateFitPredict",e.updateValidation="updateValidation"}(n||(n={})),e.AIUpdateMessageKind=n,r||(r=e.Request||(e.Request={})),l||(l=e.Response||(e.Response={})),i||(i=e.Update||(e.Update={}))}(M||(M={}));var A,V=M,W=function(e){Object(S.a)(a,e);var t=Object(N.a)(a);function a(){var e;return Object(k.a)(this,a),(e=t.call(this,new D)).workerName=j.EWorkerName.ai,e.training=!1,e}return Object(w.a)(a,[{key:"beginVectorization",value:function(e){var t={workerName:this.workerName,direction:j.ERquestOrResponesOrUpdate.request,kind:V.AIRequestMessageKind.startVectorize,payload:{method:e},requestId:this.nextRequestId()};return this.worker.postMessage(t),this.registerResponseHandler(t.requestId)}},{key:"beginUniversalVectorizer",value:function(){return this.beginVectorization("universalSentenceEncoder")}},{key:"beginTfidfVectorizer",value:function(){return this.beginVectorization("tfidf")}},{key:"beginValidation",value:function(){var e={workerName:this.workerName,direction:j.ERquestOrResponesOrUpdate.request,kind:V.AIRequestMessageKind.startValidation,payload:{},requestId:this.nextRequestId()};return this.worker.postMessage(e),this.registerResponseHandler(e.requestId)}},{key:"beginFitPredict",value:function(){var e={workerName:this.workerName,direction:j.ERquestOrResponesOrUpdate.request,kind:V.AIRequestMessageKind.startFitPredict,payload:{},requestId:this.nextRequestId()};return this.worker.postMessage(e),this.registerResponseHandler(e.requestId)}},{key:"afterNewLabel",value:function(){var e=Object(y.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.training){e.next=2;break}return e.abrupt("return");case 2:return this.training=!0,e.next=5,this.beginFitPredict();case 5:this.training=!1;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"getInstance",value:function(){return void 0===this.instance&&(this.instance=new a),this.instance}}]),a}(T);A||(A={});var H=Object(p.b)({name:"exampleSlice",initialState:{exampleIds:[],exampleIdsByDatasetName:{},exampleTermFrequency:{},docFrequency:{}},reducers:{addExamples:function(e,t){(new I).fitTransform(t.payload.examples),t.payload.examples.forEach((function(t){if(e.exampleIds.push(t.exampleId),t.datasetName){var a=e.exampleIdsByDatasetName[t.datasetName];a?a.push(t.exampleId):e.exampleIdsByDatasetName[t.datasetName]=[t.exampleId]}}))}}}),B=W.getInstance();function K(){return(K=Object(y.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={direction:j.ERquestOrResponesOrUpdate.request,requestId:-100,workerName:j.EWorkerName.dataLoader,kind:q.insertToDb,payload:{examples:t}},n=F.getInstance(),B.worker.postMessage(a),e.abrupt("return",n.addDocs(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Y,U=H.reducer,Q=a(18);Y||(Y={});var J=Object(p.b)({name:"classificationSlice",initialState:{hasLabel:null,hasPrediction:null,label:null,searchQuery:null,predictedLabel:null,hasFilter:!1,everSearched:!1},reducers:{setSearchParams:function(e,t){Object.entries(t.payload.params).forEach((function(t){var a=Object(Q.a)(t,2),n=a[0],r=a[1];e[n]=r})),t.payload.params.searchQuery&&(e.everSearched=!0),e.hasFilter=null!==e.hasLabel||null!==e.hasPrediction||null!==e.label||null!==e.predictedLabel}}});var G=Object(p.b)({name:"appMode",initialState:{mode:"Regular"},reducers:{changeMode:function(e,t){e.mode=t.payload.mode}}});Object(d.d)();Object(d.b)();var _=Object(m.c)({classificationReducer:g,exampleReducer:U,searchReducer:J.reducer,appMode:G.reducer}),Z={key:"root",storage:h.a},$=Object(f.g)(Z,_),X=Object(p.a)({reducer:$,middleware:Object(p.c)({serializableCheck:{ignoredActions:[f.a,f.f,f.b,f.c,f.d,f.e]}})});Object(f.h)(X);var ee=c.c,te=X,ae=a(165),ne=a.n(ae),re=a(506),le=a(52),ie=a(516),oe=a(517),ce=a(519),se=a(520),ue=a(475),de=a(169),me=a(518),pe=a(531),fe=a(264),be=a(250),he=a.n(be),ve=a(249),ge=a.n(ve),Ee=a(247),xe=a.n(Ee),ye=a(248),ke=a.n(ye),we=a(251),Ce=a.n(we),Oe=a(245),Le=a.n(Oe),je=a(16),Ie=(a(291),function(e){Object(S.a)(a,e);var t=Object(N.a)(a);function a(){var e;return Object(k.a)(this,a),(e=t.call(this,"OurDatabase")).version(8).stores({example:"exampleId,datasetName,label,hasLabel,hasPrediction,[hasPrediction+hasLabel],predictedLabel,[predictedLabel+label],[predictedLabel+hasLabel],confidence,hasNegativeOrRejectedLabel",label:"name",indexCache:"name",vector:"exampleId,label,hasLabel,hasNegativeOrRejectedLabel",tfidf:"exampleId,label,hasLabel,hasNegativeOrRejectedLabel",kfold:"[timestamp+kNumber+label],[timestamp+label]"}),e.example=e.table("example"),e.label=e.table("label"),e.indexCache=e.table("indexCache"),e.vector=e.table("vector"),e.tfidf=e.table("tfidf"),e.kfold=e.table("kfold"),e.changeCallbacks={example:[],label:[],indexCache:[],vector:[],tfidf:[],kfold:[]},e}return Object(w.a)(a,[{key:"addTableEventListener",value:function(e,t){this.changeCallbacks[e].push(t)}},{key:"removeTableEventListener",value:function(e,t){this.changeCallbacks[e]=this.changeCallbacks[e].filter((function(e){return e!==t}))}}]),a}(je.a));function Re(){return(Re=Object(y.a)(x.a.mark((function e(t,a){var n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.label.where("name").equals(t).first();case 2:if(!(n=e.sent)){e.next=8;break}return r=n.count+a,e.abrupt("return",Se.label.update(t,{count:r}));case 8:return e.abrupt("return",Promise.reject("Couldn't find label \n    ".concat(t," in db")));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Se=function(){var e=new Ie;return e.on("changes",(function(t){var a={};t.forEach((function(t){!function(e,t){if("example"===e.table&&2===e.type){var a=(e=e).oldObj.label,n=e.obj.label;n===a||(void 0!==a&&(t[a]=t[a]-1||-1),void 0!==n&&(t[n]=t[n]+1||1))}}(t,a),e.changeCallbacks[t.table].forEach((function(e){return e(t)}))})),Promise.all(Object.entries(a).map((function(e){var t=Object(Q.a)(e,2);return function(e,t){return Re.apply(this,arguments)}(t[0],t[1])}))),Object.keys(a).length})),e}(),Ne=(new Ie,a(241)),Pe=a.n(Ne),Te=F.getInstance();var qe=function(){var e=ee((function(e){return e.searchReducer})),t=l.a.useCallback(Object(y.a)(x.a.mark((function t(){var a,n,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(z("Calling search",e),a={hasLabel:e.hasLabel||void 0,hasPrediction:e.hasPrediction||void 0,label:e.label||void 0,predictedLabel:e.predictedLabel||void 0},Object.keys(a).forEach((function(e){return void 0===a[e]&&delete a[e]})),n=function(){return(e.hasFilter?Se.example.where(a):Se.example.toCollection()).primaryKeys().then((function(t){return z("Got back ".concat(t.length," from filter")),z("Filter was",e),t}))},!(null!==e.searchQuery&&e.searchQuery.length>0)){t.next=9;break}return r=e.searchQuery,t.abrupt("return",n().then(function(){var e=Object(y.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te.query(r);case 2:return a=e.sent,z('Search for "'.concat(r,'" and got ').concat(a.results.length," results")),e.abrupt("return",Pe()(a.results.map((function(e){return e.exampleId})),t));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:return t.abrupt("return",n());case 10:case"end":return t.stop()}}),t)}))),[e]);return Object(s.d)(["search",e],t)},ze=a(508),Me=a(31),Fe=a.n(Me),De=a(124),Ae=a.n(De),Ve=a(529),We=a(26),He=a(507),Be=Fe()((function(e){return{"@keyframes active":{"0%":{webkitTransform:"scale(.1)",opacity:"1",transform:"scale(.1)"},"70%":{webkitTransform:"scale(2.5)",opacity:"0",transform:"scale(2.5)"},"100%":{opacity:"0"}},beaconContainer:{position:"relative"},beacon:{position:"absolute",top:"50%",left:"50%",backgroundColor:e.palette.secondary.light,height:e.spacing(1),width:e.spacing(1),borderRadius:"50%",webkitTransform:"translateX(-50%) translateY(-50%)","&:before":{position:"absolute",content:'""',height:e.spacing(1),width:e.spacing(1),left:"0",top:"0",backgroundColor:"transparent",borderRadius:"50%",boxShadow:"0px 0px 2px 2px ".concat(e.palette.secondary.main),animationName:"$active",animationDuration:"2s",animationTimingFunction:"linear",animationIterationCount:"infinite"}}}})),Ke=function(e){var t=e.show,a=Be();return t?l.a.createElement("span",{className:a.beaconContainer},l.a.createElement("span",{className:a.beacon})):null},Ye=Fe()((function(e){return{inputRoot:{color:"inherit"},inputInput:Object(le.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),search:Object(le.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(We.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(We.b)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}}})),Ue=function(){var e=Ye(),t=ee((function(e){return e.searchReducer})),a=t.searchQuery,n=t.everSearched,r=l.a.useState(a||void 0),i=Object(Q.a)(r,2),o=i[0],s=i[1],u=qe(),d=Object(c.b)(),m=l.a.useCallback(Le()((function(e){d(J.actions.setSearchParams({params:{searchQuery:e.target.value}}))}),150),[]);return l.a.useEffect((function(){a&&s(a)}),[a]),l.a.createElement("div",{className:e.search},l.a.createElement("div",{className:e.searchIcon},l.a.createElement(Ae.a,null)),l.a.createElement(Ve.a,{placeholder:"Search\u2026",value:o,onChange:function(e){s(e.target.value),m(e)},classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"}}),l.a.createElement(He.a,{in:u.isLoading},l.a.createElement(ze.a,null)),l.a.createElement(Ke,{show:!n}))},Qe=a(509),Je=a(510),Ge=a(528),_e=Fe()({root:{},icon:{borderRadius:3,width:16,height:16},checkedIcon:{}}),Ze=function(e){var t=Object(c.b)(),a=_e(),n=ee((function(e){return e.searchReducer}));return l.a.createElement(Qe.a,{row:!0,style:{display:"inline"}},l.a.createElement(Je.a,{labelPlacement:"bottom",control:l.a.createElement(Ge.a,{checked:1===n.hasLabel,onChange:function(e,a){return t(J.actions.setSearchParams({params:{hasLabel:a?1:null}}))},value:1===n.hasLabel}),label:l.a.createElement("span",{style:{fontSize:"0.75rem"}},"Show Labeled")}),l.a.createElement(Je.a,{classes:a,labelPlacement:"bottom",control:l.a.createElement(Ge.a,{size:"small",style:{fontSize:"0.5rem"},checked:-1===n.hasLabel,onChange:function(e,a){return t(J.actions.setSearchParams({params:{hasLabel:a?-1:null}}))},value:-1===n.hasLabel}),label:l.a.createElement("span",{style:{fontSize:"0.75rem"}},"Hide Labeled")}),l.a.createElement(Je.a,{labelPlacement:"bottom",control:l.a.createElement(Ge.a,{checked:1===n.hasPrediction,onChange:function(e,a){return t(J.actions.setSearchParams({params:{hasPrediction:a?1:null}}))},value:1===n.hasPrediction}),label:l.a.createElement("span",{style:{fontSize:"0.75rem"}},"Show Predicted")}),l.a.createElement(Je.a,{labelPlacement:"bottom",control:l.a.createElement(Ge.a,{checked:-1===n.hasPrediction,onChange:function(e,a){return t(J.actions.setSearchParams({params:{hasPrediction:a?-1:null}}))},value:-1===n.hasPrediction}),label:l.a.createElement("span",{style:{fontSize:"0.75rem"}},"Hide Predicted")}))},$e=a(511);function Xe(e,t,a,n){var r=Object(s.d)(e,(function(){return a(Se)}));return l.a.useEffect((function(){var e=function(e){e.table===t&&(void 0!==n&&n!==e.key||r.refetch())};return Se.addTableEventListener(t,e),function(){Se.removeTableEventListener(t,e)}}),[]),r}function et(){return Xe("exampleCount","example",(function(e){return e.example.count()}),void 0)}var tt=Xe,at=function(){var e=ee((function(e){return e.appMode.mode})),t=Xe("predictionCount","example",(function(e){return e.example.where({hasPrediction:1}).count()}),void 0),a=Object(c.b)();return t.data?l.a.createElement(Je.a,{labelPlacement:"bottom",control:l.a.createElement($e.a,{value:"ActiveLearning"===e,onChange:function(){var t="Regular"===e?"ActiveLearning":"Regular";a(G.actions.changeMode({mode:t}))}}),label:"Active Learning"}):null},nt=a(521),rt=a(104),lt=a(42),it=a(246),ot=a.n(it),ct=a(129),st=a(512);function ut(){return dt.apply(this,arguments)}function dt(){return(dt=Object(y.a)(x.a.mark((function e(){var t,a,n,r,l,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.example.orderBy(["hasPrediction","hasLabel"]).reverse().toArray();case 2:t=e.sent,a=t[0],n=Object.keys(a.metadata||{}),r=["exampleId","content","label","predictedLabel","confidence"].concat(Object(lt.a)(n)),l=t.map((function(e){return Object(rt.a)(Object(rt.a)({},e),e.metadata||{})})),i=ct.unparse({fields:r,data:l}),ot()(i,"ylabalResults.csv","text/csv");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var mt=function(){var e=Object(s.c)(ut),t=Object(Q.a)(e,2),a=t[0],n=t[1];return et().data?l.a.createElement(st.a,{variant:"contained",color:"primary",onClick:function(){return a()},disabled:n.isLoading},"Download"):null},pt=a(530),ft=a(513),bt=a(514),ht=a(515),vt=Fe()((function(e){return{header:{background:e.palette.error.main,color:e.palette.error.contrastText},button:{background:e.palette.error.main,color:e.palette.error.contrastText,"&:hover":{backgroundColor:e.palette.error.dark}}}}));function gt(){return Et.apply(this,arguments)}function Et(){return(Et=Object(y.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.delete();case 2:localStorage.removeItem("persist:root"),window.location.reload();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xt=function(){var e=l.a.useState(!1),t=Object(Q.a)(e,2),a=t[0],n=t[1],r=vt();return et().data?l.a.createElement(l.a.Fragment,null,l.a.createElement(st.a,{onClick:function(){return n(!0)},className:r.button},"Start Over"),l.a.createElement(pt.a,{color:"danger",open:a,onClose:function(){return n(!1)}},l.a.createElement(ft.a,{className:r.header},l.a.createElement(de.a,{variant:"h3"},"Delete All Data ?")),l.a.createElement(bt.a,null,l.a.createElement(de.a,{variant:"h4",gutterBottom:!0},"Your about to delete all of the work you've done."),l.a.createElement(de.a,{variant:"h4",gutterBottom:!0},"Are you sure you want to ?")),l.a.createElement(ht.a,null,l.a.createElement(mt,null),l.a.createElement(st.a,{variant:"outlined",onClick:gt,className:r.button},"Yes I'm Sure")))):null},yt=Fe()((function(){return{"@global":{".github-corner:hover .octo-arm":{animation:"octocat-wave 560ms ease-in-out"},"@keyframes octocat-wave":{"0%, 100%":{transform:"rotate(0)"},"20%, 60%":{transform:"rotate(-25deg)"},"40%, 80%":{transform:"rotate(10deg)"}},"@media (max-width: 500px)":{".github-corner:hover .octo-arm":{animation:"none"},".github-corner .octo-arm":{animation:"octocat-wave 560ms ease-in-out"}}}}})),kt=function(){return yt(),l.a.createElement("a",{href:"https://github.com/LightTag/ylabel2",className:"github-corner","aria-label":"View source on GitHub",target:"_blank"},l.a.createElement("svg",{width:"80",height:"80",viewBox:"0 0 250 250",style:{fill:"#151513",color:"#fff",position:"absolute",top:0,border:0,right:0},"aria-hidden":"true"},l.a.createElement("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}),l.a.createElement("path",{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor",style:{transformOrigin:"130px 106px"},className:"octo-arm"}),l.a.createElement("path",{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor",className:"octo-body"})))},wt=Object(ie.a)((function(e){return Object(oe.a)({grow:{flexGrow:1},regularModeControls:Object(le.a)({position:"relative",borderRadius:e.shape.borderRadius,marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),menuButton:{marginRight:e.spacing(2)},title:Object(le.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),sectionDesktop:Object(le.a)({display:"none"},e.breakpoints.up("md"),{display:"flex",marginRight:e.spacing(6)}),sectionMobile:Object(le.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})})}));function Ct(){var e=wt(),t=l.a.useState(null),a=Object(Q.a)(t,2),n=a[0],r=a[1],i=l.a.useState(null),o=Object(Q.a)(i,2),c=o[0],s=o[1],u=Boolean(n),d=Boolean(c),m="ActiveLearning"===ee((function(e){return e.appMode.mode})),p=et();if(!p.data)return null;var f=p.data>0,b=function(){s(null)},h=function(){r(null),b()},v=l.a.createElement(fe.a,{anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:u,onClose:h},l.a.createElement(pe.a,{onClick:h},"Profile"),l.a.createElement(pe.a,{onClick:h},"My account")),g="primary-search-account-menu-mobile",E=l.a.createElement(fe.a,{anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},id:g,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:d,onClose:b},l.a.createElement(pe.a,null,l.a.createElement(ue.a,{"aria-label":"show 4 new mails",color:"inherit"},l.a.createElement(me.a,{badgeContent:4,color:"secondary"},l.a.createElement(xe.a,null))),l.a.createElement("p",null,"Messages")),l.a.createElement(pe.a,null,l.a.createElement(ue.a,{"aria-label":"show 11 new notifications",color:"inherit"},l.a.createElement(me.a,{badgeContent:11,color:"secondary"},l.a.createElement(ke.a,null))),l.a.createElement("p",null,"Notifications")),l.a.createElement(pe.a,{onClick:function(e){r(e.currentTarget)}},l.a.createElement(ue.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit"},l.a.createElement(ge.a,null)),l.a.createElement("p",null,"Profile")));return l.a.createElement("div",{className:e.grow},l.a.createElement(ce.a,{position:"static"},l.a.createElement(se.a,null,l.a.createElement(ue.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"open drawer"},l.a.createElement(he.a,null)),l.a.createElement(de.a,{className:e.title,variant:"h6",noWrap:!0},"YLabel"),l.a.createElement(at,null),l.a.createElement(He.a,{in:!m&&f},l.a.createElement("span",{className:e.regularModeControls},l.a.createElement(Ue,null))),l.a.createElement(nt.a,{in:!m&&f},l.a.createElement("span",{className:e.regularModeControls},l.a.createElement(Ze,null))),l.a.createElement("div",{className:e.grow}),l.a.createElement("div",{className:e.sectionDesktop},l.a.createElement(xt,null),l.a.createElement(mt,null)),l.a.createElement("div",{className:e.sectionMobile},l.a.createElement(ue.a,{"aria-label":"show more","aria-controls":g,"aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},color:"inherit"},l.a.createElement(Ce.a,null)))),l.a.createElement(kt,null)),E,v)}var Ot=a(79),Lt=a(50),jt=function(e){var t=Object(Lt.a)();return l.a.createElement(Ot.a,{orientation:"vertical",style:{height:"calc(100vh - ".concat("64px",")"),padding:t.spacing(2)}},l.a.createElement(Ot.b,{propagateDimensions:!0,flex:.25},l.a.createElement("div",{style:{height:"100%",maxHeight:"100%",overflowY:"hidden"}},e.Left)),l.a.createElement(Ot.c,null),l.a.createElement(Ot.b,{propagateDimensions:!0,flex:.5},l.a.createElement("div",{style:{height:"100%",width:"100%",maxWidth:"100%",maxHeight:"100%",overflowY:"auto"}},e.Middle)),l.a.createElement(Ot.c,null),l.a.createElement(Ot.b,{propagateDimensions:!0,flex:.25},l.a.createElement("div",{style:{height:"100%",maxHeight:"100%",overflowY:"hidden"}},l.a.createElement("div",{style:{padding:"2rem"}},e.Right))))},It=a(526),Rt=a(254),St=a.n(Rt),Nt=function(){function e(){Object(k.a)(this,e),this.colormap={},this.size=0,this.labels=new Set}return Object(w.a)(e,[{key:"addLabel",value:function(e){this.labels.has(e)||(this.labels.add(e),this.recolor())}},{key:"getLabelColor",value:function(e){return this.addLabel(e),this.colormap[e]}},{key:"recolor",value:function(){var e=this,t=0,a=359/this.labels.size;this.colormap={},this.labels.forEach((function(n){e.colormap[n]=function(e,t,a){var n=Tt(e,t,a);return Pt(n)}(t,.32,.6),t+=a}))}}]),e}();var Pt=function(e){var t="#";return e.forEach((function(e){e<16&&(t+=0),t+=e.toString(16)})),t},Tt=function(e,t,a){var n=a<.5?a*(1+t):a+t-a*t,r=2*a-n;return[(e/=360)+1/3,e,e-1/3].map((function(e){return e<0&&e++,e>1&&e--,e=e<1/6?r+6*(n-r)*e:e<.5?n:e<2/3?r+6*(n-r)*(2/3-e):r,Math.round(255*e)}))},qt=new Nt,zt=Fe()((function(e){return{root:{marginLeft:"0.1rem",padding:"0.2rem",boxShadow:"1px 1px 1px #CDCDCD",borderRadius:"2px",cursor:"pointer"},term:{},score:{}}})),Mt=function(e){var t=e.term,a=zt();return l.a.createElement("div",{className:a.root,onClick:function(){return e.searchForTerm(t)}},l.a.createElement("div",{className:a.term},t))},Ft=function(e){return l.a.createElement(l.a.Fragment,null,e.terms.slice(0,22).map((function(t){return l.a.createElement(Mt,{term:t.word,score:t.score,label:e.label,searchForTerm:e.searchForTerm})})))},Dt=function(e){var t=Object(s.d)(["sigTerms",e.label,e.count],(function(){return e.labelController.getSignificantTerms(e.label)}),{cacheTime:0});return void 0===t.isLoading?l.a.createElement("div",null,'"calculating"'):t.isError?l.a.createElement("div",null," error"):t.data?(z({label:e.label,terms:t.data.terms.slice(10)}),l.a.createElement(Ft,{label:e.label,searchForTerm:e.labelController.searchForTerm,terms:t.data.terms})):l.a.createElement("div",null," problem ",JSON.stringify(t.isSuccess))},At=l.a.memo((function(e){var t=e.labelName;return l.a.createElement("span",null,l.a.createElement(Je.a,{control:l.a.createElement(Ge.a,{checked:e.labelController.filteredLabel===t,onChange:function(){e.labelController.filteredLabel===e.labelName?e.labelController.changeLabelFilter(null,"human"):e.labelController.changeLabelFilter(t,"human")},inputProps:{"aria-label":"primary checkbox"}}),label:"Labels"}),l.a.createElement(Je.a,{control:l.a.createElement(Ge.a,{checked:e.labelController.filteredPrediction===t,onChange:function(){e.labelController.filteredPrediction===e.labelName?e.labelController.changeLabelFilter(null,"pred"):e.labelController.changeLabelFilter(t,"pred")},inputProps:{"aria-label":"primary checkbox"},color:"primary"}),label:"Predictions"}))})),Vt=Fe()((function(e){return{root:{marginBottom:"2px",textOverflow:"ellipsis",cursor:"pointer",padding:e.spacing(1),marginRight:e.spacing(1),borderRadius:"4px",fontWeight:"bold",userSelect:"none",fontSize:"0.75rem",display:"inline-block",width:"100%",maxHeight:"200px",position:"relative",marginTop:"1rem","&>label":{padding:"0.15rem",background:"white",position:"absolute",top:"-1rem"}},nameContainer:{textTransform:"uppercase",fontWeight:"bold",fontSize:"0.75rem"},termsContainer:{marginTop:"1rem",border:"1px solid black",fontSize:"10px",position:"relative",display:"inline-flex",width:"100%","flex-wrap":"wrap","&>label":{padding:"0.15rem",background:"white",position:"absolute",top:"-1rem",fontSize:"0.7rem",border:"1px solid black",borderBottom:"none",borderRadius:"4px"}},controlorContainers:{width:"66%"},toggleButton:{border:"0.1rem solid white",padding:"0.25rem",textTransform:"uppercase",fontSize:"0.5rem"}}})),Wt=l.a.memo((function(e){var t,a=Vt(),n=e.labelName,r=qt.getLabelColor(n);t=l.a.useMemo((function(){var e=qt.getLabelColor(n);return{borderColor:e,border:"1px solid ".concat(e)}}),[n]);return l.a.createElement("div",{style:t,className:a.root,onClick:function(){e.onClick&&(e.selected?e.onClick(null):e.onClick(n))}},l.a.createElement("label",{className:a.nameContainer,style:{color:r}}," ",n," - ",e.count," "),l.a.createElement("span",{className:a.toggleButton,onClick:function(){return e.labelController.applyLabelToSearchResults(n)}}," ","Label All"," "),l.a.createElement(At,{labelName:n,labelController:e.labelController}),l.a.createElement("span",{className:a.termsContainer},l.a.createElement("label",null,"Keywords"),l.a.createElement(Dt,{label:n,labelController:e.labelController,count:e.count})))}));function Ht(){var e=Object(c.b)(),t=ee((function(e){return e.searchReducer})),a=t.label,n=t.predictedLabel,r=function(){var e=qe();return Object(s.c)((function(t){return Se.transaction("rw",[Se.example,Se.tfidf,Se.vector],Object(y.a)(x.a.mark((function a(){var n;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n={label:t||void 0,hasLabel:null!==t?1:-1},a.next=3,Promise.all((e.data||[]).map(function(){var e=Object(y.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Promise.all([Se.example.update(t,n),Se.tfidf.update(t,n),Se.vector.update(t,n)]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return a.stop()}}),a)}))))}))}(),i=Object(Q.a)(r,1)[0];return l.a.useMemo((function(){return{getSignificantTerms:function(e){return F.getInstance().getSignificantTermsForLabel(e)},applyLabelToSearchResults:i,searchForTerm:function(t){e(J.actions.setSearchParams({params:{searchQuery:t}}))},changeLabelFilter:function(t,a){var n={};"human"===a&&(n.label=t),"pred"===a&&(n.predictedLabel=t),e(J.actions.setSearchParams({params:n}))},filteredLabel:a,filteredPrediction:n}}),[i,e,a,n])}var Bt=a(522),Kt=function(){var e=Xe("labelCount","label",(function(e){return e.label.count()}),void 0),t=l.a.useState(),a=Object(Q.a)(t,2),n=a[0],r=a[1],i=Object(s.c)(function(){var e=Object(y.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.label.add({name:t,kind:"label",count:0},t);case 2:r(void 0);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),o=Object(Q.a)(i,1)[0];return l.a.createElement("div",{style:{padding:"1rem"}},l.a.createElement(It.a,{fullWidth:!0,label:"Add a new label",value:n,onChange:function(e){return r(e.target.value)},InputProps:{startAdornment:l.a.createElement(Bt.a,{position:"start"},l.a.createElement(Ke,{show:0===e.data})),endAdornment:l.a.createElement(Bt.a,{position:"end"},l.a.createElement(ue.a,{size:"small",disabled:void 0===n,color:n?"primary":void 0,onClick:function(){return n&&o(n)}},l.a.createElement(St.a,{fontSize:"small"})))}}))};var Yt=function(e){var t=tt("labelStats","label",(function(e){return e.label.toArray()}),void 0),a=Ht();return t.data?l.a.createElement(l.a.Fragment,null,l.a.createElement(de.a,{gutterBottom:!0,variant:"h4"},"Labels"),l.a.createElement(Kt,null),l.a.createElement("div",{style:{flexWrap:"wrap",display:"flex",width:"100%",maxHeight:"95%",overflowY:"auto",marginTop:"1rem"}},t.data.map((function(e,t){return l.a.createElement(Wt,{labelController:a,selected:!1,count:e.count,labelName:e.name,key:e.name})})))):l.a.createElement("div",null,"loading")},Ut=a(255);var Qt=function(){return tt(["examples","forAL"],"example",function(){var e=Object(y.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.example.where({hasLabel:-1,hasPrediction:1});case 2:return a=e.sent,e.next=5,a.toArray();case 5:return n=e.sent,n=Object(Ut.sortBy)(n,(function(e){return e.confidence?-1*e.confidence:0})),e.abrupt("return",{size:a.count(),items:n});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),void 0)},Jt=l.a.createContext(null),Gt=function(e){var t,a=Qt(),n=l.a.useState(void 0),r=Object(Q.a)(n,2),i=r[0],o=r[1],c=l.a.useState(0),s=Object(Q.a)(c,2),u=s[0],d=s[1],m=null===(t=a.data)||void 0===t?void 0:t.items;l.a.useEffect((function(){d(0),0===u&&void 0===i&&void 0!==m&&o(m[u])}),[m]);var p=function(){var e=u+1;d(e),o(m?m[e]:void 0)},f=l.a.useMemo((function(){return{goToNext:p,currentExample:i}}),[i]);return l.a.createElement(Jt.Provider,{value:f},e.children)},_t=a(476);function Zt(e,t){return $t.apply(this,arguments)}function $t(){return($t=Object(y.a)(x.a.mark((function e(t,a){var n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.example.get(t);case 2:return n=e.sent,(r=new Set((null===n||void 0===n?void 0:n.rejectedLabels)||[])).add(a),e.next=7,Se.transaction("rw",[Se.example,Se.tfidf,Se.vector],Object(y.a)(x.a.mark((function e(){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={hasNegativeOrRejectedLabel:1,rejectedLabels:Array.from(r)},e.next=3,Se.example.update(t,a);case 3:return e.next=5,Se.tfidf.update(t,a);case 5:return e.next=7,Se.vector.update(t,a);case 7:case"end":return e.stop()}}),e)}))));case 7:return z("rejected label ".concat(a," for example ").concat(t)),W.getInstance().afterNewLabel(),e.abrupt("return");case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xt(e,t){return Se.transaction("rw",[Se.example,Se.tfidf,Se.vector],Object(y.a)(x.a.mark((function a(){var n,r;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Se.example.get(e);case 2:if(!(n=a.sent)){a.next=7;break}return r={label:t||void 0,hasLabel:null!==t?1:-1,hasNegativeOrRejectedLabel:t||(n.rejectedLabels||[]).length>0?1:-1},a.next=7,Promise.all([Se.example.update(e,r),Se.tfidf.update(e,r),Se.vector.update(e,r)]);case 7:case"end":return a.stop()}}),a)}))))}var ea=Fe()((function(e){return{cbRoot:{display:"inline",width:"fit-content",maxWidth:"20%",textOverflow:"ellipsis",cursor:"pointer",padding:e.spacing(1),marginRight:e.spacing(1),borderRadius:"4px",fontWeight:"bold",userSelect:"none"}}})),ta=l.a.memo((function(e){var t=ea(),a=e.labelName,n=l.a.useMemo((function(){var t=qt.getLabelColor(a);return e.selected?{background:t,color:"white"}:{borderColor:t,color:t,border:"1px solid"}}),[a,e.selected]),r=l.a.useContext(Jt),i=function(){e.onClick&&(e.selected?e.onClick(null):(e.onClick(a),W.getInstance().afterNewLabel(),r&&r.goToNext()))};return l.a.createElement("div",{onKeyDown:function(e){"Enter"!==e.key&&32!==e.keyCode||(i(),e.preventDefault())},style:n,className:t.cbRoot,onClick:i},a," ",e.comment?" - ".concat(e.comment):null)})),aa=l.a.memo((function(e){var t=e.exampleId,a=tt("labels","label",(function(e){return e.label.toArray()}),void 0),n=tt(["exampleLabel",t],"example",(function(e){return e.example.get(t)}),e.exampleId);return a.data&&n.data?l.a.createElement("div",null,a.data.map((function(e){var t;return l.a.createElement("span",{style:n.data.rejectedLabels.includes(e.name)?{opacity:.3}:{}},l.a.createElement(ta,{labelName:e.name,selected:(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.label)===e.name,onClick:function(){return Xt(n.data.exampleId,e.name)}}))}))):null})),na=a(523),ra=Object(ie.a)((function(e){return{root:{boxShadow:"4px 4px 4px #CDCDCD ",margin:e.spacing(3),padding:e.spacing(3),lineHeight:"2.5rem"},body:{whiteSpace:"pre-wrap",fontSize:"16px",lineHeight:"32px","&>em":{background:"yellow","&:focus":{fontWeight:"bold"}}},divider:{margin:e.spacing(2,0)},ribbon:{height:"15%"}}})),la=l.a.memo((function(e){var t=ee((function(e){return e.searchReducer})).searchQuery,a=e.text,n=[];if(t){t=t.toLowerCase();for(var r=a.toLowerCase().search(t);-1!==r;){n.push(l.a.createElement("span",null,a.slice(0,r)));var i=r+t.length;n.push(l.a.createElement("em",{tabIndex:0},a.slice(r,i))),r=(a=a.slice(i)).search(t)}n.push(l.a.createElement("span",null,a))}else n.push(l.a.createElement("span",null,e.text));return l.a.createElement(l.a.Fragment,null," ",n," ")})),ia=function(e){var t,a,n,r,i=ra(),o=tt(["example",e.exampleId],"example",(function(t){return t.example.get(e.exampleId)}),e.exampleId),c=l.a.useContext(Jt);return l.a.useEffect((function(){e.onLoad&&e.onLoad()}),[o.data]),o.data?l.a.createElement(_t.a,{className:i.root,style:{border:(null===(t=o.data)||void 0===t?void 0:t.predictedLabel)?"1px solid ".concat(qt.getLabelColor(o.data.predictedLabel)):void 0}},l.a.createElement("div",{className:i.ribbon},l.a.createElement(de.a,{variant:"subtitle1",color:"primary"},e.score||null),l.a.createElement(aa,{exampleId:e.exampleId})),l.a.createElement(na.a,{className:i.divider}),l.a.createElement("div",{style:{fontWeight:"bold"},onClick:function(){o.data&&o.data.predictedLabel&&(Zt(o.data.exampleId,o.data.predictedLabel),c&&c.goToNext())}}," ",(null===(a=o.data)||void 0===a?void 0:a.predictedLabel)||null," ",(null===(n=o.data)||void 0===n||null===(r=n.confidence)||void 0===r?void 0:r.toLocaleString("en",{style:"percent"}))||null),l.a.createElement(de.a,{className:i.body,dir:"auto"},l.a.createElement(la,{text:o.data.content}))):l.a.createElement("div",null,"HI")},oa=function(){var e=l.a.useRef(null),t=l.a.useContext(Jt);if(l.a.useEffect((function(){e.current&&e.current.focus()})),!t)return l.a.createElement("div",null,"Not in an active learning context");if(void 0===t.currentExample)return l.a.createElement("div",null,"No example in context");return l.a.createElement("div",{ref:e,onKeyDown:function(e){t.currentExample&&t.currentExample.predictedLabel&&("x"===e.key&&(Zt(t.currentExample.exampleId,t.currentExample.predictedLabel),t.goToNext()),"a"===e.key&&(Xt(t.currentExample.exampleId,t.currentExample.predictedLabel),t.goToNext()))},tabIndex:0},l.a.createElement(ia,{score:1,exampleId:t.currentExample.exampleId}),";",l.a.createElement(st.a,{onClick:t.goToNext},"Skip"))},ca=W.getInstance(),sa=function(){var e=l.a.useState(!1),t=Object(Q.a)(e,2),a=t[0],n=t[1],r=function(){var e=Object(y.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.next=3,ca.beginTfidfVectorizer();case 3:n(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(y.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.next=3,ca.beginUniversalVectorizer();case 3:n(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(y.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.next=3,ca.beginFitPredict();case 3:return e.next=5,n(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=Object(y.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.next=3,ca.beginValidation();case 3:n(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement(st.a,{disabled:a,onClick:r},"Calculate TFIDF"),l.a.createElement(st.a,{disabled:a,onClick:i},"Vectorize"),l.a.createElement(st.a,{disabled:a,onClick:o},"Train SVM"),l.a.createElement(st.a,{disabled:a,onClick:c,color:"primary"},"Val"),l.a.createElement(He.a,{in:a},l.a.createElement(ze.a,{variant:"indeterminate"})))},ua=a(106),da=new ua.c({fixedWidth:!0}),ma=function(e){return l.a.createElement(ua.b,{cache:da,columnIndex:0,key:e.virtualizedRowProps.key,parent:e.virtualizedRowProps.parent,rowIndex:e.virtualizedRowProps.index},(function(t){var a=t.measure;return l.a.createElement("div",{style:e.virtualizedRowProps.style},l.a.createElement(ia,{key:e.exampleId,exampleId:e.exampleId,onLoad:a}))}))},pa=function(e){var t=e.exampleIds;return l.a.createElement(ua.a,null,(function(a){var n=a.height,r=a.width;return l.a.createElement(ua.d,{rowHeight:da.rowHeight,rowCount:t.length,width:r,height:n,rowRenderer:function(t){return l.a.createElement(ma,{virtualizedRowProps:t,exampleId:e.exampleIds[t.index]})},deferredMeasurementCache:da})}))},fa=function(e){return new Promise((function(t,a){var n={worker:!1,headerPlacement:!0,dynamicTyping:!0,complete:function(e){return t(e)},error:function(e){return a(e.message)},skipEmptyLines:!0,header:!0};ct.parse(e,n)}))},ba=function(e){return new Promise((function(t,a){var n=new FileReader;n.onload=function(){try{var e=n.result,r=JSON.parse(e);Array.isArray(r)?t(r):a("The JSON you uploaded is a single object. Please convert it to an array of objects, one per example")}catch(l){a("This JSON has errors. Please validate the JSON and try again")}},n.readAsText(e)}))},ha=function(){var e=Object(y.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.name.endsWith("json")){e.next=6;break}return e.next=3,ba(t);case 3:a=e.sent,e.next=10;break;case 6:return e.next=8,fa(t);case 8:n=e.sent,a=n.data;case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),va=a(258),ga=a.n(va),Ea=a(524),xa=function(e){var t=e.data,a=e.key,n=e.labelKey,r=[];return t&&a&&t.forEach((function(e){var t=Object(rt.a)({},e);delete t[a],r.push({content:e[a],datasetName:"test",exampleId:ga()(e[a]).toString(),label:n?e[n]:void 0,hasLabel:n&&e[n]?1:-1,kind:"example",hasNegativeOrRejectedLabel:-1,rejectedLabels:[],metadata:t})})),function(e){return K.apply(this,arguments)}(r)},ya=function(e){var t=l.a.useRef(null),a=l.a.useState(),n=Object(Q.a)(a,2),r=n[0],i=n[1],o=l.a.useState(),c=Object(Q.a)(o,2),u=c[0],d=c[1],m=l.a.useState(),p=Object(Q.a)(m,2),f=p[0],b=p[1],h=l.a.useState(),v=Object(Q.a)(h,2),g=v[0],E=v[1],k=Object(s.c)(xa),w=Object(Q.a)(k,2),C=w[0],O=w[1],L=function(){var a=Object(y.a)(x.a.mark((function a(n){var r;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),!t){a.next=12;break}if(!t.current){a.next=12;break}if(!t.current.files){a.next=12;break}if(!t.current.files[0]){a.next=12;break}return a.next=8,ha(t.current.files[0]);case 8:r=a.sent,E(r),i(Object.keys(r[0])),e.afterSubmit&&e.afterSubmit();case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return l.a.createElement(Ea.a,{container:!0,spacing:4},l.a.createElement(Ea.a,{item:!0,xs:12},l.a.createElement("input",{ref:t,accept:"text/csv, text/tsv, .csv,.tsv, .json",onChange:L,style:{display:"none"},id:"csv-file",multiple:!0,type:"file"}),l.a.createElement("label",{htmlFor:"csv-file"},l.a.createElement(st.a,{fullWidth:!0,variant:"outlined",component:"span",color:"primary"},"Add A CSV"))),l.a.createElement(Ea.a,{item:!0,xs:12},l.a.createElement(It.a,{required:!0,fullWidth:!0,disabled:!r,onChange:function(e){return d(e.target.value)},select:!0,label:"Data Column",helperText:"Which column will you be labeling? ",value:u},(r||[]).map((function(e){return l.a.createElement(pe.a,{key:e,value:e},e)})))),l.a.createElement(Ea.a,{item:!0,xs:12},l.a.createElement(It.a,{fullWidth:!0,disabled:!u,onChange:function(e){return b(e.target.value)},select:!0,label:"Label Column",helperText:"Is there a column with labels?  ",value:u},l.a.createElement(pe.a,{key:"empty",value:void 0,disabled:!1},l.a.createElement(de.a,{color:"error"}," No Labels ")),(r||[]).map((function(e){return l.a.createElement(pe.a,{key:e,value:e,disabled:e===u},e)})))),l.a.createElement(Ea.a,{item:!0,xs:12},l.a.createElement(st.a,{color:"primary",variant:"contained",disabled:!u||O.isLoading,onClick:function(){return C({data:g,key:u,labelKey:f})},fullWidth:!0},l.a.createElement(He.a,{in:!O.isLoading},l.a.createElement("span",null," Upload "))),l.a.createElement(He.a,{in:O.isLoading},l.a.createElement(ze.a,null))))},ka=function(e){return l.a.createElement(pt.a,{open:e.open,onClose:e.onClose},l.a.createElement(ft.a,null,"Add Data"),l.a.createElement(bt.a,null,l.a.createElement(ya,null)))},wa=function(e){var t=l.a.useState(!1),a=Object(Q.a)(t,2),n=a[0],r=a[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(st.a,Object.assign({},e.buttonProps,{onClick:function(){return r(!0)}}),e.label),l.a.createElement(ka,{open:n,onClose:function(){return r(!1)}}))},Ca=ka,Oa=function(){return l.a.createElement("div",{style:{width:"400px",margin:"auto"}},l.a.createElement(de.a,{variant:"h3",gutterBottom:!0},"No Results"),l.a.createElement(de.a,{variant:"h5",gutterBottom:!0},"We searched hard, but the current query doesn't have any matches"))},La=function(){var e=qe(),t=e.data||[];return l.a.createElement(l.a.Fragment,null,l.a.createElement(He.a,{in:e.isLoading},l.a.createElement("div",null,"Loading")),l.a.createElement(He.a,{in:e.isSuccess&&t.length>0,mountOnEnter:!0,unmountOnExit:!0},l.a.createElement(pa,{exampleIds:t})),l.a.createElement(He.a,{in:e.isSuccess&&0===t.length,mountOnEnter:!0,unmountOnExit:!0},l.a.createElement(Oa,null)))},ja=function(){var e="ActiveLearning"===ee((function(e){return e.appMode.mode}));return l.a.createElement("div",{style:{height:"100%",padding:"2rem",maxHeight:"100%",overflowY:"auto"}},e?l.a.createElement(Gt,null,l.a.createElement(oa,null)):l.a.createElement(La,null))},Ia=function(){return l.a.createElement(jt,{Left:l.a.createElement(Yt,null),Middle:l.a.createElement(ja,null),Right:l.a.createElement("div",null,l.a.createElement(sa,null)," ",l.a.createElement(wa,{label:"Add Data",buttonProps:{variant:"contained",color:"primary"}}))})},Ra=a(167),Sa=a.n(Ra),Na=a(259),Pa=a.n(Na),Ta=a(260),qa=a.n(Ta),za=a(261),Ma=a.n(za),Fa=a(262),Da=a.n(Fa),Aa=a(263),Va=a.n(Aa),Wa=function(e){return l.a.createElement(Ea.a,{item:!0,xs:6},l.a.createElement(_t.a,{style:{padding:"1rem"}},l.a.createElement(Ea.a,{container:!0,alignItems:"center",spacing:2,justify:"space-between"},l.a.createElement(Ea.a,{item:!0,xs:1},e.Icon?l.a.createElement(e.Icon,{fontSize:"large"}):null),l.a.createElement(Ea.a,{item:!0,xs:10},l.a.createElement(de.a,{variant:"h4"},e.title)),l.a.createElement(Ea.a,{item:!0,xs:12},l.a.createElement("label",{style:{fontSize:"16px"}},e.subtitle," ")))))},Ha=function(){var e=l.a.useState(!1),t=Object(Q.a)(e,2),a=t[0],n=t[1];return l.a.createElement(Ea.a,{container:!0,spacing:4,style:{padding:"2rem",margin:"-16px -32px"}},l.a.createElement(Ea.a,{item:!0,xs:6},l.a.createElement(de.a,{color:"primary",variant:"h3"},"Welcome To YLabel")),l.a.createElement(Ea.a,{item:!0,xs:6},l.a.createElement(st.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:function(){return n(!0)}},l.a.createElement(de.a,{align:"center",variant:"h4"},"Start Categorizing"))),l.a.createElement(Wa,{title:"Categorize Documents",subtitle:"YLabel can help you categorize documents",Icon:Pa.a}),l.a.createElement(Wa,{title:"Customizable",subtitle:"YLabel works on your data and your categories. ",Icon:qa.a}),l.a.createElement(Wa,{title:"Search",subtitle:"Use the search bar to find similar documents at once",Icon:Ae.a}),l.a.createElement(Wa,{title:"Automation",subtitle:"YLabel learns from you and provides predictions",Icon:Sa.a}),l.a.createElement(Wa,{title:"Active Learning",subtitle:"YLabel can tell you what to label so that it can learn faster and automate better",Icon:Sa.a}),l.a.createElement(Wa,{title:"Download",subtitle:"When you're done, click download to get back your labels and model predictions in a CSV",Icon:Ma.a}),l.a.createElement(Wa,{title:"Secure",subtitle:"Your data never leaves your computer. YLabel runs the machine learning and search on your machine. ",Icon:Da.a}),l.a.createElement(Wa,{title:"Open Source",subtitle:"YLabel is free and open source. Fork the repo, extend it and help the community make it even better",Icon:Va.a}),l.a.createElement(Ca,{open:a,onClose:function(){return n(!1)}}))},Ba=function(){return l.a.createElement(jt,{Middle:l.a.createElement(Ha,null),Left:l.a.createElement("div",null),Right:l.a.createElement("div",null)})},Ka=function(){return tt("exampleCount","example",(function(e){return e.example.count()}),void 0).data?l.a.createElement(Ia,null):l.a.createElement(Ba,null)},Ya=ne()({typography:{fontSize:10,fontFamily:"Roboto"}}),Ua=new s.a,Qa=Fe()((function(){return{"@global":{"*:focus":{outline:0}}}}));var Ja=function(){var e=Qa();return l.a.createElement(c.a,{store:te},l.a.createElement(s.b,{queryCache:Ua},l.a.createElement(re.a,{theme:Ya},l.a.createElement(u.a,{classes:e}),l.a.createElement(Ct,null),l.a.createElement(Ka,null))))},Ga=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,532)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,l=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),l(e),i(e)}))};F.getInstance().initializeIndex().then((function(){})).catch((function(e){})),Se.label.offset(12).delete(),o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(Ja,null)),document.getElementById("root")),Ga()}},[[470,1,2]]]);
//# sourceMappingURL=main.5ee915e3.chunk.js.map